(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2816f835"],{"510f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"hover"}},[a("custom-table",{attrs:{id:"article-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0,"opt-width":180},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,handleSelectionChange:e.handleSelectionChange,handleRowDblClick:e.handleRowDblClick,handleEdit:e.handleEdit,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"searchBar",fn:function(){return[a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params,size:"mini"}},[a("el-form-item",{attrs:{prop:"keyword"}},[a("el-input",{attrs:{placeholder:"搜索关键词"},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1),a("el-form-item",{attrs:{prop:"recommend"}},[a("el-select",{attrs:{placeholder:"推荐"},model:{value:e.params.recommend,callback:function(t){e.$set(e.params,"recommend",t)},expression:"params.recommend"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("el-form-item",{attrs:{prop:"top"}},[a("el-select",{attrs:{placeholder:"置顶"},model:{value:e.params.top,callback:function(t){e.$set(e.params,"top",t)},expression:"params.top"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("el-form-item",{attrs:{prop:"status"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[a("el-option",{attrs:{label:"显示",value:!0}}),a("el-option",{attrs:{label:"隐藏",value:!1}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(t){return e.onSubmit(t)}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-left"},nativeOn:{click:function(t){e.$refs["searchForm"].resetFields(),e.onSubmit()}}},[e._v("重置 ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},nativeOn:{click:function(t){return e.$router.push("/article/article-add")}}},[e._v("添加 ")])],1)],1)]},proxy:!0},{key:"opt",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"warning"},on:{click:function(a){return a.stopPropagation(),e.handleDownload(t.scope.$index,t.scope.row)}}})]}}])})],1)],1)},l=[],i=(a("a434"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showFilter||e.showSearch?a("div",{staticClass:"check-cloumn-container"},[e.showSearch?e._t("searchBar"):e._e(),e.showFilter?a("el-dropdown",{staticClass:"filter"},[a("el-button",{attrs:{type:"danger",size:"mini"}},[e._v(" "+e._s(e.$t("opt.filter"))),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox",{staticClass:"check-column-item",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.$t("opt.check_all"))+" ")]),a("el-checkbox-group",{on:{change:e.handleCheckedColumnChange},model:{value:e.checkedColumn,callback:function(t){e.checkedColumn=t},expression:"checkedColumn"}},e._l(e.tableHead,(function(t,n){return a("div",{key:n},[a("el-checkbox",{staticClass:"check-column-item",attrs:{label:t.label}},[e._v(e._s(t.label))])],1)})),0)],1)],1):e._e()],2):e._e(),a("el-table",{key:e.key,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:e.id,data:e.data,"row-key":e.hanldeRowKey,border:"",fit:"",size:"mini","tooltip-effect":"dark"},on:{"header-dragend":e.handleHeaderDrag,"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange,"row-dblclick":e.handleRowDblClick}},[e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableHeadOptions,(function(t,n){return a("el-table-column",{key:n,attrs:{width:t.width?t.width:"",align:t.align||"center",label:t.label,prop:t.prop,sortable:!!t.sortable&&"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return[t.render?[a("span",{domProps:{innerHTML:e._s(t.render(n.row))}})]:t.component?[a(t.component(n.row).is,{tag:"component",attrs:{type:t.component(n.row).type,title:t.component(n.row).title}})]:[e._v(e._s(n.row[t.prop]))]]}}],null,!0)})})),e.showOpt?a("el-table-column",{attrs:{align:"center",label:"操作","min-width":e.optWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.handleEdit(t.$index,t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return a.stopPropagation(),e.handleDelete(t.$index,t.row)}}}),e._t("opt",null,{scope:t})]}}],null,!0)}):e._e()],2),e.showPage?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.params.page,total:e.params.total,"page-sizes":e.params.pageSizes,"page-size":e.params.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},r=[],s=(a("4de4"),a("4160"),a("c975"),a("a9e3"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tag",{attrs:{type:e.type,size:"mini"}},[e._v(e._s(e.title))])}),c=[],d={name:"CustomTag",props:{type:{type:String,default:""},title:{type:String,default:""}}},u=d,h=a("2877"),p=Object(h["a"])(u,s,c,!1,null,null,null),m=p.exports,f=a("aa47"),g={name:"CustomTable",components:{CustomTag:m,Sortable:f["a"]},props:{id:{type:String,default:""},showSelection:{type:Boolean,default:!0},tableHead:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},showPage:{type:Boolean,default:!0},params:{type:Object,default:null},showFilter:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},showOpt:{type:Boolean,default:!0},optWidth:{type:Number,default:120}},data:function(){return{key:0,tableHeadOptions:{},selectionList:[],checkAll:!0,checkedColumn:[],isIndeterminate:!1}},watch:{checkedColumn:function(e){var t=this;this.tableHeadOptions=this.tableHead.filter((function(t){return e.indexOf(t.label)>=0})),this.key+=1,setTimeout((function(){t.rowDrop()}),100)}},mounted:function(){var e=this;this.tableHead.forEach((function(t){e.checkedColumn.push(t.label)})),this.getTableColWidth()},methods:{hanldeRowKey:function(e){return e.id},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleRowClick:function(e){var t=this.$refs.multipleTable;t.toggleRowSelection(e)},handleSelectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.$emit("handleSelectionChange",t)},handleRowDblClick:function(e){var t=e.id;this.$emit("handleRowDblClick",t)},handleEdit:function(e,t){this.$emit("handleEdit",e,t)},handleDelete:function(e,t){this.$emit("handleDelete",e,t)},handleHeaderDrag:function(e,t,a,n){var l=this;setTimeout((function(){for(var e=l.id,t=[],a=document.getElementById(e),n=a.getElementsByTagName("colgroup")[0],i=n.getElementsByTagName("col"),o=l.showSelection?1:0;o<i.length;o++)t.push(i[o].width);localStorage.setItem(e,JSON.stringify(t))}),100)},getTableColWidth:function(){var e=localStorage.getItem(this.id);if(e){e=JSON.parse(e);for(var t=0,a=this.tableHead.length;t<a;t++)this.tableHead[t].width=e[t]}},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;f["a"].create(e,{onEnd:function(e){var a=e.newIndex,n=e.oldIndex,l=t.data.splice(n,1)[0];t.data.splice(a,0,l),t.$emit("handleRowRrop",t.data)}})},handleCheckAllChange:function(e){var t=this;this.checkedColumn=[],e&&this.tableHead.forEach((function(e){t.checkedColumn.push(e.label)})),this.isIndeterminate=!1},handleCheckedColumnChange:function(e){var t=e.length;this.checkAll=t===this.tableHead.length,this.isIndeterminate=t>0&&t<this.tableHead.length}}},b=g,w=(a("ab43"),Object(h["a"])(b,o,r,!1,null,"00c61846",null)),k=w.exports,y=a("b775");function C(e){return Object(y["a"])({url:"/Article/articleLst",method:"get",params:e})}function v(e){return Object(y["a"])({url:"/Article/articleDelete",method:"post",data:e})}var S={name:"ArticleList",components:{CustomTable:k},data:function(){return{List:[],selectionIdList:[],tableHead:[{label:this.$i18n.t("field.id"),prop:"id",width:60},{label:this.$i18n.t("field.title"),prop:"title",width:300},{label:this.$i18n.t("field.image"),prop:"image",render:function(e){return'<img  src="'+e.image+'" class="table-img"/>'}},{label:this.$i18n.t("field.author"),prop:"author"},{label:this.$i18n.t("field.recommend"),prop:"recommend",component:function(e){return e.recommend?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:this.$i18n.t("field.top"),prop:"top",component:function(e){return e.top?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:this.$i18n.t("field.status"),prop:"status",component:function(e){return e.status?{is:"custom-tag",type:"success",title:"启用"}:{is:"custom-tag",type:"danger",title:"禁用"}}},{label:this.$i18n.t("field.addtime"),prop:"addtime",width:140},{label:this.$i18n.t("field.updatetime"),prop:"updatetime",width:140}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",recommend:"",top:"",status:""}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getArticleLst();case 2:case"end":return t.stop()}}),t)})))()},methods:{getArticleLst:function(){var e=this;return C(this.params).then((function(t){e.List=t.data.data,e.params.total=t.data.total})).catch((function(){}))},handleSizeChange:function(e){this.params.pageSize=e,this.getArticleLst()},handleCurrentChange:function(e){this.params.page=e,this.getArticleLst()},handleSelectionChange:function(e){this.selectionIdList=e},handleRowDblClick:function(e){this.$router.push({path:"/article/article-edit",query:{id:e}})},handleEdit:function(e,t){this.handleRowDblClick(t.id)},handleDelete:function(e,t){var a=this;v({id:t.id}).then((function(t){a.List.splice(e,1),a.$message({message:a.$i18n.t("tips.delete_success"),type:"success"})})).catch((function(){}))},handleDownload:function(e,t){this.$message({message:this.$i18n.t("tips.download_info")+t.id,type:"success"})},onSubmit:function(){this.params.page=1,this.params.pageSize=10,this.getArticleLst()}}},_=S,$=Object(h["a"])(_,n,l,!1,null,null,null);t["default"]=$.exports},ab43:function(e,t,a){"use strict";var n=a("ff97"),l=a.n(n);l.a},ff97:function(e,t,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d88f18a"],{"14cb":function(e,t,n){"use strict";var a=n("d61d"),i=n.n(a);i.a},2423:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("b775");function i(e){return Object(a["a"])({url:"/Article/articleAdd",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/Article/articleEdit",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/Article/articleLst",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/Article/articleDetail",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/Article/articleDelete",method:"post",data:e})}},"510f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",{attrs:{shadow:"hover"}},[n("custom-table",{attrs:{id:"article-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0,"opt-width":180},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,handleSelectionChange:e.handleSelectionChange,handleRowDblClick:e.handleRowDblClick,handleEdit:e.handleEdit,handleDelete:e.handleDelete},scopedSlots:e._u([{key:"searchBar",fn:function(){return[n("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params,size:"mini"}},[n("el-form-item",{attrs:{prop:"keyword"}},[n("el-input",{attrs:{placeholder:"搜索关键词"},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1),n("el-form-item",{attrs:{prop:"recommend"}},[n("el-select",{attrs:{placeholder:"推荐"},model:{value:e.params.recommend,callback:function(t){e.$set(e.params,"recommend",t)},expression:"params.recommend"}},[n("el-option",{attrs:{label:"是",value:!0}}),n("el-option",{attrs:{label:"否",value:!1}})],1)],1),n("el-form-item",{attrs:{prop:"top"}},[n("el-select",{attrs:{placeholder:"置顶"},model:{value:e.params.top,callback:function(t){e.$set(e.params,"top",t)},expression:"params.top"}},[n("el-option",{attrs:{label:"是",value:!0}}),n("el-option",{attrs:{label:"否",value:!1}})],1)],1),n("el-form-item",{attrs:{prop:"status"}},[n("el-select",{attrs:{placeholder:"状态"},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[n("el-option",{attrs:{label:"显示",value:!0}}),n("el-option",{attrs:{label:"隐藏",value:!1}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(t){return e.onSubmit(t)}}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh-left"},nativeOn:{click:function(t){e.$refs["searchForm"].resetFields(),e.onSubmit()}}},[e._v("重置 ")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},nativeOn:{click:function(t){return e.$router.push("/article/article-add")}}},[e._v("添加 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(t){return e.handleDeleteRows(t)}}},[e._v("删除")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-rank"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("这是一个可移动弹窗")])],1)],1)]},proxy:!0},{key:"opt",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"warning"},on:{click:function(n){return n.stopPropagation(),e.handleDownload(t.scope.$index,t.scope.row)}}})]}}])})],1),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"弹窗",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("span",[e._v("这是一个可移动弹窗")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确定")])],1)])],1)},i=[],l=(n("4de4"),n("c975"),n("a434"),n("96cf"),n("1da1")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showFilter||e.showSearch?n("div",{staticClass:"check-cloumn-container"},[e.showSearch?e._t("searchBar"):e._e(),e.showFilter?n("el-dropdown",{staticClass:"filter"},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" 筛选"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-checkbox",{staticClass:"check-column-item",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选 ")]),n("el-checkbox-group",{on:{change:e.handleCheckedColumnChange},model:{value:e.checkedColumn,callback:function(t){e.checkedColumn=t},expression:"checkedColumn"}},e._l(e.tableHead,(function(t,a){return n("div",{key:a},[n("el-checkbox",{staticClass:"check-column-item",attrs:{label:t.label}},[e._v(e._s(t.label))])],1)})),0)],1)],1):e._e()],2):e._e(),n("el-table",{key:e.key,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:e.id,data:e.data,"row-key":e.hanldeRowKey,border:"",fit:"",size:"mini","tooltip-effect":"dark"},on:{"header-dragend":e.handleHeaderDrag,"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange,"row-dblclick":e.handleRowDblClick}},[e.showSelection?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableHeadOptions,(function(t,a){return n("el-table-column",{key:a,attrs:{width:t.width?t.width:"",align:t.align||"center",label:t.label,prop:t.prop,sortable:!!t.sortable&&"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t.render?[n("span",{domProps:{innerHTML:e._s(t.render(a.row))}})]:t.component?[n(t.component(a.row).is,{tag:"component",attrs:{type:t.component(a.row).type,title:t.component(a.row).title}})]:[e._v(e._s(a.row[t.prop]))]]}}],null,!0)})})),e.showOpt?n("el-table-column",{attrs:{align:"center",label:"操作","min-width":e.optWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(n){return n.stopPropagation(),e.handleEdit(t.$index,t.row)}}}),n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(n){return n.stopPropagation(),e.handleDelete(t.$index,t.row)}}}),e._t("opt",null,{scope:t})]}}],null,!0)}):e._e()],2),e.showPage?n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.params.page,total:e.params.total,"page-sizes":e.params.pageSizes,"page-size":e.params.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},r=[],s=(n("4160"),n("a9e3"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tag",{attrs:{type:e.type,size:"mini"}},[e._v(e._s(e.title))])}),c=[],d={name:"CustomTag",props:{type:{type:String,default:""},title:{type:String,default:""}}},u=d,h=n("2877"),p=Object(h["a"])(u,s,c,!1,null,null,null),m=p.exports,f=n("aa47"),g={name:"CustomTable",components:{CustomTag:m,Sortable:f["a"]},props:{id:{type:String,default:""},showSelection:{type:Boolean,default:!0},tableHead:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},showPage:{type:Boolean,default:!0},params:{type:Object,default:null},showFilter:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},showOpt:{type:Boolean,default:!0},optWidth:{type:Number,default:120}},data:function(){return{key:0,tableHeadOptions:{},selectionList:[],checkAll:!0,checkedColumn:[],isIndeterminate:!1}},watch:{checkedColumn:function(e){var t=this;this.tableHeadOptions=this.tableHead.filter((function(t){return e.indexOf(t.label)>=0})),this.key+=1,setTimeout((function(){t.rowDrop()}),100)}},mounted:function(){var e=this;this.tableHead.forEach((function(t){e.checkedColumn.push(t.label)})),this.getTableColWidth()},methods:{hanldeRowKey:function(e){return e.id},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleRowClick:function(e){var t=this.$refs.multipleTable;t.toggleRowSelection(e)},handleSelectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.$emit("handleSelectionChange",t)},handleRowDblClick:function(e){var t=e.id;this.$emit("handleRowDblClick",t)},handleEdit:function(e,t){this.$emit("handleEdit",e,t)},handleDelete:function(e,t){this.$emit("handleDelete",e,t)},handleHeaderDrag:function(e,t,n,a){var i=this;setTimeout((function(){for(var e=i.id,t=[],n=document.getElementById(e),a=n.getElementsByTagName("colgroup")[0],l=a.getElementsByTagName("col"),o=i.showSelection?1:0;o<l.length;o++)t.push(l[o].width);localStorage.setItem(e,JSON.stringify(t))}),100)},getTableColWidth:function(){var e=localStorage.getItem(this.id);if(e){e=JSON.parse(e);for(var t=0,n=this.tableHead.length;t<n;t++)this.tableHead[t].width=e[t]}},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;f["a"].create(e,{onEnd:function(e){var n=e.newIndex,a=e.oldIndex,i=t.data.splice(a,1)[0];t.data.splice(n,0,i),t.$emit("handleRowRrop",t.data)}})},handleCheckAllChange:function(e){var t=this;this.checkedColumn=[],e&&this.tableHead.forEach((function(e){t.checkedColumn.push(e.label)})),this.isIndeterminate=!1},handleCheckedColumnChange:function(e){var t=e.length;this.checkAll=t===this.tableHead.length,this.isIndeterminate=t>0&&t<this.tableHead.length}}},b=g,w=(n("14cb"),Object(h["a"])(b,o,r,!1,null,"682059f7",null)),k=w.exports,y=n("2423"),C={name:"ArticleList",components:{CustomTable:k},data:function(){return{List:[],selectionIdList:[],tableHead:[{label:"编号",prop:"id",width:60},{label:"标题",prop:"title",width:300},{label:"图片",prop:"image",render:function(e){return'<img  src="'+e.image+'" class="table-img"/>'}},{label:"作者",prop:"author"},{label:"推荐",prop:"recommend",component:function(e){return e.recommend?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:"置顶",prop:"top",component:function(e){return e.top?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:"状态",prop:"status",component:function(e){return e.status?{is:"custom-tag",type:"success",title:"启用"}:{is:"custom-tag",type:"danger",title:"禁用"}}},{label:"添加时间",prop:"addtime",width:140},{label:"修改时间",prop:"updatetime",width:140}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",recommend:"",top:"",status:""},dialogVisible:!1}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getArticleLst();case 2:case"end":return t.stop()}}),t)})))()},methods:{getArticleLst:function(){var e=this;return Object(y["e"])(this.params).then((function(t){e.List=t.data.data,e.params.total=t.data.total})).catch((function(){}))},handleSizeChange:function(e){this.params.pageSize=e,this.getArticleLst()},handleCurrentChange:function(e){this.params.page=e,this.getArticleLst()},handleSelectionChange:function(e){this.selectionIdList=e},handleRowDblClick:function(e){this.$router.push({path:"/article/article-edit",query:{id:e}})},handleEdit:function(e,t){this.handleRowDblClick(t.id)},handleDelete:function(e,t){var n=this;Object(y["b"])({ids:[t.id]}).then((function(t){n.List.splice(e,1),n.$message({message:"删除成功",type:"success"})})).catch((function(){}))},handleDownload:function(e,t){this.$message({message:"当前下载行的id是"+t.id,type:"success"})},handleDeleteRows:function(){var e=this,t=this;if(0==this.selectionIdList.length)return this.$message({message:"请选择要删除的数据",type:"error"}),!1;Object(y["b"])({ids:this.selectionIdList}).then((function(n){e.List=e.List.filter((function(t){return-1==e.selectionIdList.indexOf(t.id)})),e.$message({message:"删除成功",type:"success",onClose:function(){t.getArticleLst()}})})).catch((function(){}))},onSubmit:function(){this.params.page=1,this.params.pageSize=10,this.getArticleLst()}}},v=C,S=Object(h["a"])(v,a,i,!1,null,null,null);t["default"]=S.exports},d61d:function(e,t,n){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d03cedd"],{2423:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return u}));var r=i("b775");function l(e){return Object(r["a"])({url:"/Article/articleAdd",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/Article/articleEdit",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/Article/articleLst",method:"get",params:e})}function a(e){return Object(r["a"])({url:"/Article/articleDetail",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/Article/articleDelete",method:"post",data:e})}},"6d02":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-card",{attrs:{shadow:"hover"}},[i("el-row",{attrs:{type:"flex",justify:"left"}},[i("el-col",{attrs:{xs:24,md:12}},[i("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.ruleForm,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:e.$t("field.title"),prop:"title"}},[i("el-input",{attrs:{placeholder:e.$t("field.title")},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),i("el-form-item",{attrs:{label:e.$t("field.image"),prop:"image"}},[i("Upload",{on:{handleUploadSuccess:function(t){return e.handleUploadSuccess(t)},handleDeleteFile:function(t){e.ruleForm.image=""}}})],1),i("el-form-item",{attrs:{label:e.$t("field.author"),prop:"author"}},[i("el-input",{attrs:{placeholder:e.$t("field.author")},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1),i("el-form-item",{attrs:{label:e.$t("field.detail"),prop:"detail"}},[i("QuillEditor",{attrs:{url:e.serverUrl,header:e.header,value:e.ruleForm.detail},on:{input:function(t){return e.input(t)}}})],1),i("el-form-item",{attrs:{label:e.$t("field.recommend"),prop:"recommend"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}})],1),i("el-form-item",{attrs:{label:e.$t("field.top"),prop:"top"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.top,callback:function(t){e.$set(e.ruleForm,"top",t)},expression:"ruleForm.top"}})],1),i("el-form-item",{attrs:{label:e.$t("field.status"),prop:""}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.$t("opt.confirm")))]),i("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v(e._s(e.$t("opt.reset")))])],1)],1)],1)],1)],1)],1)},l=[],o=i("2423"),n=i("c7f0"),a=i("b930"),u=i("5f87"),s=i("01ea"),c={name:"ArticleAdd",components:{Upload:n["a"],QuillEditor:a["a"]},data:function(){return{ruleForm:{title:"",image:"",author:"",type:"",detail:"",recommend:!0,top:!0,status:!0},rules:{title:[{required:!0,message:this.$i18n.t("tips.input")+this.$i18n.t("field.title"),trigger:"blur"}],image:[{required:!0,message:this.$i18n.t("tips.upload")+this.$i18n.t("field.image")}],author:[{required:!0,message:this.$i18n.t("tips.input")+this.$i18n.t("field.author"),trigger:"blur"}],detail:[{required:!0,message:this.$i18n.t("tips.input")+this.$i18n.t("field.detail")}]},header:{"X-Token":Object(u["a"])()},serverUrl:s["a"]+"/Upload/fileUpload"}},mounted:function(){},methods:{submitForm:function(e){var t=this,i=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(o["a"])(t.ruleForm).then((function(e){t.$message({message:t.$i18n.t("tips.add_success"),type:"success",onClose:function(){i.$router.push("/article/article-list")}})})).catch((function(){}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleUploadSuccess:function(e){this.ruleForm.image=e,this.$refs["ruleForm"].clearValidate("image")},input:function(e){this.ruleForm.detail=e}}},d=c,m=i("2877"),f=Object(m["a"])(d,r,l,!1,null,null,null);t["default"]=f.exports},b731:function(e,t,i){},b930:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.url,headers:e.header,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload,name:"img"}}),i("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},l=[],o=(i("a9e3"),i("9339")),n=i.n(o),a=i("953d"),u=i("f318"),s=i.n(u),c=(i("a753"),i("8096"),i("14e1"),[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]);n.a.register("modules/imageResize",s.a);var d={components:{quillEditor:a["quillEditor"]},props:{value:{type:String,default:""},maxSize:{type:Number,default:4e3},url:{type:String,default:""},header:{type:Object,default:null}},data:function(){return{content:this.value,quillUpdateImg:!1,editorOption:{theme:"snow",placeholder:"您想说点什么？",modules:{toolbar:{container:c,handlers:{image:function(e){e?document.querySelector(".avatar-uploader input").click():this.quill.format("image",!1)}}},imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]}}}}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},watch:{value:function(e,t){this.content=e}},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("input",this.content)},beforeUpload:function(){this.quillUpdateImg=!0},uploadSuccess:function(e,t){var i=this.$refs.myQuillEditor.quill,r=i.getSelection().index;i.insertEmbed(r,"image",e.data.imgUrl),i.setSelection(r+1),this.quillUpdateImg=!1},uploadError:function(){this.quillUpdateImg=!1,this.$message.error("图片插入失败")}}},m=d,f=(i("bd2c"),i("2877")),p=Object(f["a"])(m,r,l,!1,null,null,null);t["a"]=p.exports},bd2c:function(e,t,i){"use strict";var r=i("b731"),l=i.n(r);l.a},bedb:function(e,t,i){"use strict";var r=i("cda0"),l=i.n(r);l.a},c7f0:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-file-commpent"},[e.imgUrl?i("div",{staticClass:"uplaod-file-preview",on:{mouseenter:function(t){e.isShowOpt=!0},mouseleave:function(t){e.isShowOpt=!1}}},[i("img",{attrs:{src:e.imgUrl,alt:"上传成功图片"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowOpt,expression:"isShowOpt"}],staticClass:"opt"},[i("i",{staticClass:"el-icon-delete delete-btn",on:{click:function(t){return e.handleClickDelete()}}})])]):e._e(),e.imgUrl?e._e():i("div",{staticClass:"upload-file-btn",on:{click:function(t){return e.$refs.file.click()}}},[i("i",{staticClass:"el-icon-plus"}),i("input",{ref:"file",staticClass:"upload-file-input",attrs:{type:"file",accept:e.fileType},on:{change:function(t){return e.handleUploadFile(t.target.files[0])}}})])])},l=[],o=i("b775");function n(e){return Object(o["a"])({url:"/Upload/fileUpload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}var a={name:"Upload",props:{file:{type:String,default:""},fileType:{type:String,default:"image/*"}},data:function(){return{imgUrl:"",isShowOpt:!1}},watch:{file:function(e,t){this.imgUrl=e}},mounted:function(){var e=this;this.$nextTick((function(){e.imgUrl=e.file}))},methods:{handleUploadFile:function(e){var t=this,i=new FormData;i.append("file",e),n(i).then((function(e){t.imgUrl=e.data.imgUrl,t.$message({message:"上传成功",type:"success",onClose:function(){}}),t.$emit("handleUploadSuccess",t.imgUrl)})).catch((function(){}))},handleClickDelete:function(){this.imgUrl="",this.$emit("handleDeleteFile")}}},u=a,s=(i("bedb"),i("2877")),c=i("fda6"),d=i.n(c),m=Object(s["a"])(u,r,l,!1,null,"6459e72b",null);"function"===typeof d.a&&d()(m);t["a"]=m.exports},cda0:function(e,t,i){},fda6:function(e,t){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b66fe76"],{"510f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("custom-table",{attrs:{id:"article-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,handleSelectionChange:e.handleSelectionChange,handleRowDblClick:e.handleRowDblClick}})],1)},i=[],l=(n("96cf"),n("1da1")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"block check-cloumn-container"},[n("el-dropdown",[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" 筛选"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-checkbox",{staticClass:"check-column-item",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选 ")]),n("el-checkbox-group",{on:{change:e.handleCheckedColumnChange},model:{value:e.checkedColumn,callback:function(t){e.checkedColumn=t},expression:"checkedColumn"}},e._l(e.tableHead,(function(t,a){return n("div",{key:a},[n("el-checkbox",{staticClass:"check-column-item",attrs:{label:t.label}},[e._v(e._s(t.label))])],1)})),0)],1)],1)],1),n("el-table",{ref:"multipleTable",staticClass:"block",staticStyle:{width:"100%"},attrs:{id:e.id,data:e.data,"row-key":e.hanldeRowKey,border:"",fit:"",size:"mini","tooltip-effect":"dark"},on:{"header-dragend":e.handleHeaderDrag,"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange,"row-dblclick":e.handleRowDblClick}},[e.showSelection?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableHeadOptions,(function(t,a){return n("el-table-column",{key:a,attrs:{width:t.width?t.width:"",align:t.align||"center",label:t.label,prop:t.prop,sortable:!!t.sortable&&"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t.render?[n("span",{domProps:{innerHTML:e._s(t.render(a.row))}})]:t.component?[n(t.component(a.row).is,{tag:"component",attrs:{type:t.component(a.row).type,title:t.component(a.row).title}})]:[e._v(e._s(a.row[t.prop]))]]}}],null,!0)})}))],2),e.showPage?n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.params.page,total:e.params.total,"page-sizes":e.params.pageSizes,"page-size":e.params.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},r=[],c=(n("4de4"),n("4160"),n("c975"),n("a434"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tag",{attrs:{type:e.type,size:"mini"}},[e._v(e._s(e.title))])}),s=[],d={name:"CustomTag",props:{type:{type:String,default:""},title:{type:String,default:""}}},h=d,u=n("2877"),p=Object(u["a"])(h,c,s,!1,null,null,null),m=p.exports,g=n("aa47"),f={name:"CustomTable",components:{CustomTag:m,Sortable:g["a"]},props:{id:{type:String,default:""},showSelection:{type:Boolean,default:!0},tableHead:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},showPage:{type:Boolean,default:!0},params:{type:Object,default:null}},data:function(){return{tableHeadOptions:{},selectionList:[],checkAll:!0,checkedColumn:[],isIndeterminate:!1}},watch:{checkedColumn:function(e){this.tableHeadOptions=this.tableHead.filter((function(t){return e.indexOf(t.label)>=0}))}},mounted:function(){var e=this;this.tableHead.forEach((function(t){e.checkedColumn.push(t.label)})),this.getTableColWidth(),this.rowDrop()},methods:{hanldeRowKey:function(e){return e.id},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleRowClick:function(e){var t=this.$refs.multipleTable;t.toggleRowSelection(e)},handleSelectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.$emit("handleSelectionChange",t)},handleRowDblClick:function(e){var t=e.id;this.$emit("handleRowDblClick",t)},handleHeaderDrag:function(e,t,n,a){var i=this;setTimeout((function(){for(var e=i.id,t=[],n=document.getElementById(e),a=n.getElementsByTagName("colgroup")[0],l=a.getElementsByTagName("col"),o=i.showSelection?1:0;o<l.length;o++)t.push(l[o].width);localStorage.setItem(e,JSON.stringify(t))}),100)},getTableColWidth:function(){var e=localStorage.getItem(this.id);if(e){e=JSON.parse(e);for(var t=0,n=this.tableHead.length;t<n;t++)this.tableHead[t].width=e[t]}},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;g["a"].create(e,{onEnd:function(e){var n=e.newIndex,a=e.oldIndex,i=t.data.splice(a,1)[0];t.data.splice(n,0,i)}})},handleCheckAllChange:function(e){var t=this;this.checkedColumn=[],e&&this.tableHead.forEach((function(e){t.checkedColumn.push(e.label)})),this.isIndeterminate=!1},handleCheckedColumnChange:function(e){var t=e.length;this.checkAll=t===this.tableHead.length,this.isIndeterminate=t>0&&t<this.tableHead.length}}},b=f,C=(n("c66e"),Object(u["a"])(b,o,r,!1,null,"70ed04a6",null)),w=C.exports,k=n("b775");function y(e){return Object(k["a"])({url:"/Article/articleLst",method:"get",params:e})}var v={name:"ArticleList",components:{CustomTable:w},data:function(){return{List:[],selectionIdList:[],tableHead:[{label:this.$i18n.t("field.id"),prop:"id",width:60},{label:this.$i18n.t("field.title"),prop:"title",width:300},{label:this.$i18n.t("field.image"),prop:"image",render:function(e){return'<img  src="'+e.image+'" class="table-img"/>'}},{label:this.$i18n.t("field.author"),prop:"author"},{label:this.$i18n.t("field.recommend"),prop:"recommend",component:function(e){return e.recommend?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:this.$i18n.t("field.top"),prop:"top",component:function(e){return e.top?{is:"custom-tag",type:"success",title:"是"}:{is:"custom-tag",type:"danger",title:"否"}}},{label:this.$i18n.t("field.status"),prop:"status",component:function(e){return e.status?{is:"custom-tag",type:"success",title:"启用"}:{is:"custom-tag",type:"danger",title:"禁用"}}},{label:this.$i18n.t("field.addtime"),prop:"addtime",width:140},{label:this.$i18n.t("field.updatetime"),prop:"updatetime",width:140}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",recommend:"",top:"",status:""}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getArticleLst();case 2:case"end":return t.stop()}}),t)})))()},methods:{getArticleLst:function(){var e=this;return y(this.params).then((function(t){e.List=t.data.data,e.params.total=t.data.total})).catch((function(){}))},handleSizeChange:function(e){this.params.pageSize=e,this.getArticleLst()},handleCurrentChange:function(e){this.params.page=e,this.getArticleLst()},handleSelectionChange:function(e){this.selectionIdList=e},handleRowDblClick:function(e){this.$router.push({path:"/article/article-edit",query:{id:e}})},onSubmit:function(){this.params.page=1,this.params.pageSize=10,this.getArticleLst()}}},S=v,_=Object(u["a"])(S,a,i,!1,null,null,null);t["default"]=_.exports},"642d":function(e,t,n){},c66e:function(e,t,n){"use strict";var a=n("642d"),i=n.n(a);i.a}}]);
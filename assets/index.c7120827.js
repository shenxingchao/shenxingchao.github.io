var je=Object.defineProperty,Ue=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var ve=(e,t,s)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,V=(e,t)=>{for(var s in t||(t={}))qe.call(t,s)&&ve(e,s,t[s]);if(ge)for(var s of ge(t))Fe.call(t,s)&&ve(e,s,t[s]);return e},A=(e,t)=>Ue(e,Ge(t));var we=(e,t,s)=>new Promise((n,o)=>{var d=r=>{try{a(s.next(r))}catch(c){o(c)}},i=r=>{try{a(s.throw(r))}catch(c){o(c)}},a=r=>r.done?n(r.value):Promise.resolve(r.value).then(d,i);a((s=s.apply(e,t)).next())});import{d as C,u as N,g as T,p as ne,w as W,q as Y,s as ee,t as y,r as u,j as f,k as v,n as be,v as j,c as b,x as m,y as Ve,l as D,A as oe,B as ae,o as l,C as h,D as z,F as J,G as ze,H as Q,I as U,T as Ke,J as M,K as $e,L as G,h as S,O as ie,P as re,Q as Xe,R as Ye,S as P,U as Je,V as Ee,W as Qe,X as Ze,Y as Se,Z as xe,_ as et,$ as tt,a0 as st,a1 as nt,a as ot,b as at,a2 as H,a3 as it,m as Te,a4 as rt,e as lt}from"./vendor.d9db8d1a.js";import{_ as L,i as le,a as q}from"./componentInstall.166f2505.js";function ye(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function ct(e,t){ye(e,t)||(e.className+=" "+t)}function dt(e,t){if(ye(e,t)){const s=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(s," ")}}const ut=C({name:"RightPanel",components:{},props:{clickNotClose:{default:!1,type:Boolean},buttonBottom:{default:10,type:Number}},setup(e){N();let t=T({show:!1}),s=ne(null);W(()=>t.show,i=>{i&&!e.clickNotClose&&n(),i?ct(document.body,"showRightPanel"):dt(document.body,"showRightPanel")}),Y(()=>{d()}),ee(()=>{s.value.remove()});const n=()=>{window.addEventListener("click",o)},o=i=>{i.target.closest(".rightPanel")||(t.show=!1,window.removeEventListener("click",o))},d=()=>{const i=s.value,a=document.querySelector("body");a.insertBefore(i,a.firstChild)};return A(V({},y(t)),{rightPanel:s})}}),pt=e=>(oe("data-v-d35022a4"),e=e(),ae(),e),_t=pt(()=>v("div",{class:"rightPanel-background"},null,-1)),ht={class:"rightPanel"},mt={class:"rightPanel-items"};function ft(e,t,s,n,o,d){const i=u("close"),a=u("el-icon"),r=u("setting");return l(),f("div",{ref:"rightPanel",class:D([{show:e.show},"rightPanel-container"])},[_t,v("div",ht,[v("div",{class:"handle-button",style:be({bottom:e.buttonBottom+"px"}),onClick:t[0]||(t[0]=j(c=>e.show=!e.show,["stop"]))},[e.show?(l(),b(a,{key:0,style:{"vertical-align":"middle"}},{default:m(()=>[h(i)]),_:1})):(l(),b(a,{key:1,style:{"vertical-align":"middle"}},{default:m(()=>[h(r)]),_:1}))],4),v("div",mt,[Ve(e.$slots,"default",{},void 0,!0)])])],2)}var gt=L(ut,[["render",ft],["__scopeId","data-v-d35022a4"]]);const vt=C({name:"Hamburger",components:{},props:{isActive:{type:Boolean,default:!1}},emits:["toggleClick"],setup(e,{emit:t}){return{toggleClick:()=>{t("toggleClick")}}}});function wt(e,t,s,n,o,d){const i=u("svg-icon");return l(),f("div",{style:{padding:"0 15px"},onClick:t[0]||(t[0]=(...a)=>e.toggleClick&&e.toggleClick(...a))},[h(i,{class:D([{"is-active":e.isActive},"hamburger"]),"icon-class":"collapse"},null,8,["class"])])}var bt=L(vt,[["render",wt],["__scopeId","data-v-c9c94f34"]]);const Vt=C({components:{},setup(){const e=z(),t=J();let s=T({levelList:null});W(t,()=>{n()});const n=()=>{let a=t.matched.filter(c=>c.meta&&c.meta.title);const r=a[0];o(r)||(a=[{path:"/dashboard",meta:{title:"\u63A7\u5236\u53F0"}}].concat(a)),s.levelList=a.filter(c=>c.meta&&c.meta.title&&c.meta.breadcrumb!==!1)},o=a=>{const r=a&&a.name;return r?r.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase():!1},d=a=>{const{params:r}=t;var c=ze.compile(a);return c(r)},i=a=>{const{redirect:r,path:c}=a;if(r){e.push(r);return}e.push(d(c))};return n(),A(V({},y(s)),{pathCompile:d,handleLink:i})}}),$t={key:0,class:"no-redirect"},Et=["onClick"];function St(e,t,s,n,o,d){const i=u("el-breadcrumb-item"),a=u("el-breadcrumb");return l(),b(a,{class:"app-breadcrumb",separator:"\\"},{default:m(()=>[h(Ke,{name:"breadcrumb"},{default:m(()=>[(l(!0),f(U,null,Q(e.levelList,(r,c)=>(l(),b(i,{key:r.path},{default:m(()=>[r.redirect==="noRedirect"||c==e.levelList.length-1?(l(),f("span",$t,M(r.meta.title),1)):(l(),f("a",{key:1,onClick:j(_=>e.handleLink(r),["prevent"])},M(r.meta.title),9,Et))]),_:2},1024))),128))]),_:1})]),_:1})}var Tt=L(Vt,[["render",St],["__scopeId","data-v-0e23f4fe"]]);const yt=C({components:{},setup(){const{proxy:e}=$e();let t=T({isFullscreen:!1});const s=()=>{if(!G.isEnabled)return e.$message({message:"you browser can not work",type:"warning"}),!1;G.toggle()},n=()=>{t.isFullscreen=G.isFullscreen},o=()=>{G.enabled&&G.on("change",n)},d=()=>{G.enabled&&G.off("change",n)};return Y(()=>{o()}),ee(()=>{d()}),A(V({},y(t)),{click:s})}});function kt(e,t,s,n,o,d){const i=u("svg-icon");return l(),f("div",null,[h(i,{"icon-class":e.isFullscreen?"exit-fullscreen":"fullscreen",onClick:e.click},null,8,["icon-class","onClick"])])}var Ct=L(yt,[["render",kt],["__scopeId","data-v-556c9942"]]);const Lt=C({name:"HeaderSearch",components:{},setup(){const e=N(),t=z();let s=T({search:"",options:[],searchPool:[],show:!1,fuse:void 0});const n=ne(null),o=T({routes:S(()=>e.getters.permission_routes)});W(o.routes,()=>{s.searchPool=c(o.routes)}),W(()=>s.searchPool,g=>{r(g)}),W(()=>s.show,g=>{g?document.body.addEventListener("click",i):document.body.removeEventListener("click",i)}),Y(()=>{s.searchPool=c(o.routes)});const d=()=>{s.show=!s.show,s.show&&n.value&&n.value.focus()},i=()=>{n.value&&n.value.blur(),s.options=[],s.show=!1},a=g=>{t.push(g.path),s.search="",s.options=[],re(()=>{s.show=!1})},r=g=>{s.fuse=new Xe(g,{shouldSort:!0,threshold:.4,location:0,distance:100,minMatchCharLength:1,keys:[{name:"title",weight:.7},{name:"path",weight:.3}]})},c=(g,O="/",F=[])=>{let R=[];for(const I of g){if(I.hidden)continue;const B={path:ie.resolve(O,I.path),title:[...F]};if(I.meta&&I.meta.title&&(B.title=[...B.title,I.meta.title],I.redirect!=="noRedirect"&&R.push(B)),I.children){const x=c(I.children,B.path,B.title);x.length>=1&&(R=[...R,...x])}}return R},_=g=>{g!==""?s.options=s.fuse.search(g):s.options=[]};return A(V(V({},y(s)),y(o)),{headerSearchSelect:n,click:d,change:a,querySearch:_})}});function It(e,t,s,n,o,d){const i=u("svg-icon"),a=u("el-option"),r=u("el-select");return l(),f("div",{class:D([{show:e.show},"header-search"])},[h(i,{"class-name":"search-icon","icon-class":"search",onClick:j(e.click,["stop"])},null,8,["onClick"]),h(r,{ref:"headerSearchSelect",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=c=>e.search=c),"remote-method":e.querySearch,filterable:"","default-first-option":"",remote:"",placeholder:"\u641C\u7D22",class:"header-search-select",onChange:e.change},{default:m(()=>[(l(!0),f(U,null,Q(e.options,c=>(l(),b(a,{key:c.item.path,value:c.item,label:c.item.title.join(" > ")},null,8,["value","label"]))),128))]),_:1},8,["modelValue","remote-method","onChange"])],2)}var At=L(Lt,[["render",It],["__scopeId","data-v-601c3f95"]]);const Dt=C({components:{Hamburger:bt,Breadcrumb:Tt,Screenfull:Ct,Search:At},computed:V({},Ye(["sidebar","avatar","device"])),setup(){const e=N(),t=z(),s=J();return{toggleSideBar:()=>{e.dispatch("app/toggleSideBar")},logout:()=>we(this,null,function*(){yield e.dispatch("user/logout"),t.push(`/login?redirect=${s.fullPath}`)})}}}),Pt=e=>(oe("data-v-4b01eea0"),e=e(),ae(),e),Ot={class:"navbar"},Rt={class:"right-menu"},Bt={class:"avatar-wrapper"},Nt=["src"],Wt=Je("\u4E3B\u9875"),Mt=Pt(()=>v("span",{style:{display:"block"}},"\u9000\u51FA\u767B\u5F55",-1));function Ht(e,t,s,n,o,d){const i=u("hamburger"),a=u("breadcrumb"),r=u("search"),c=u("screenfull"),_=u("caret-bottom"),g=u("el-icon"),O=u("el-dropdown-item"),F=u("router-link"),R=u("el-dropdown-menu"),I=u("el-dropdown");return l(),f("div",Ot,[h(i,{"is-active":e.sidebar.opened,class:"hamburger-container",onToggleClick:e.toggleSideBar},null,8,["is-active","onToggleClick"]),h(a,{class:"breadcrumb-container"}),v("div",Rt,[e.device!=="mobile"?(l(),f(U,{key:0},[h(r,{id:"header-search",class:"right-menu-item"}),h(c,{id:"screenfull",class:"right-menu-item hover-effect"})],64)):P("",!0),h(I,{class:"avatar-container",trigger:"click"},{dropdown:m(()=>[h(R,{class:"user-dropdown"},{default:m(()=>[h(F,{to:"/"},{default:m(()=>[h(O,null,{default:m(()=>[Wt]),_:1})]),_:1}),h(O,{divided:"",onClick:e.logout},{default:m(()=>[Mt]),_:1},8,["onClick"])]),_:1})]),default:m(()=>[v("div",Bt,[v("img",{src:e.avatar+"?imageView2/1/w/80/h/80",class:"user-avatar"},null,8,Nt),h(g,null,{default:m(()=>[h(_)]),_:1})])]),_:1})])])}var jt=L(Dt,[["render",Ht],["__scopeId","data-v-4b01eea0"]]);const Ut=C({name:"SidebarLogo",components:{},props:{collapse:{type:Boolean,required:!0}},setup(){let e=T({title:"\u7F51\u7AD9\u540E\u53F0\u7BA1\u7406",logo:"https://v3.cn.vuejs.org/logo.png"});return V({},y(e))}}),Gt=["src"],qt={key:1,class:"sidebar-title"},Ft=["src"],zt={class:"sidebar-title"};function Kt(e,t,s,n,o,d){const i=u("router-link");return l(),f("div",{class:D(["sidebar-logo-container",{collapse:e.collapse}])},[h(Ee,{name:"mode-fade",mode:"out-in"},{default:m(()=>[e.collapse?(l(),b(i,{key:"collapse",class:"sidebar-logo-link",to:"/"},{default:m(()=>[e.logo?(l(),f("img",{key:0,src:e.logo,class:"sidebar-logo"},null,8,Gt)):(l(),f("h1",qt,M(e.title),1))]),_:1})):(l(),b(i,{key:"expand",class:"sidebar-logo-link",to:"/"},{default:m(()=>[e.logo?(l(),f("img",{key:0,src:e.logo,class:"sidebar-logo"},null,8,Ft)):P("",!0),v("h1",zt,M(e.title),1)]),_:1}))]),_:1})],2)}var Xt=L(Ut,[["render",Kt],["__scopeId","data-v-2df43d16"]]);const Yt=C({components:{},props:{to:{type:String,required:!0}},setup(e){const t=T({isExternal:S(()=>le(e.to)),type:S(()=>e.isExternal?"a":"router-link")}),s=n=>t.isExternal?{href:n,target:"_blank",rel:"noopener"}:{to:n};return A(V({},y(t)),{linkProps:s})}});function Jt(e,t,s,n,o,d){return l(),b(Se(e.type),Qe(Ze(e.linkProps(e.to))),{default:m(()=>[Ve(e.$slots,"default")]),_:3},16)}var Qt=L(Yt,[["render",Jt]]);const Zt=C({name:"SidebarItem",components:{AppLink:Qt},props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},setup(e){let t=T({onlyOneChild:{}});const s=(o=[],d)=>{const i=o.filter(a=>a.hidden?!1:(t.onlyOneChild=a,!0));return i.length===1?!0:i.length===0?(t.onlyOneChild=A(V({},d),{path:"",noShowingChildren:!0}),!0):!1},n=o=>le(o)?o:le(e.basePath)?e.basePath:ie.resolve(e.basePath,o);return A(V({},y(t)),{hasOneShowingChild:s,resolvePath:n})}}),xt={key:0};function es(e,t,s,n,o,d){const i=u("svg-icon"),a=u("el-menu-item"),r=u("app-link"),c=u("sidebar-item",!0),_=u("el-sub-menu");return e.item.hidden?P("",!0):(l(),f("div",xt,[e.hasOneShowingChild(e.item.children,e.item)&&(!e.onlyOneChild.children||e.onlyOneChild.noShowingChildren)&&!e.item.alwaysShow?(l(),f(U,{key:0},[e.onlyOneChild.meta?(l(),b(r,{key:0,to:e.resolvePath(e.onlyOneChild.path)},{default:m(()=>[h(a,{index:e.resolvePath(e.onlyOneChild.path),class:D({"submenu-title-noDropdown":!e.isNest})},{title:m(()=>[v("span",null,M(e.onlyOneChild.meta.title),1)]),default:m(()=>[e.onlyOneChild.meta.icon.includes("el-icon")?(l(),f("i",{key:0,class:D(e.onlyOneChild.meta.icon||(e.item.meta&&e.item.meta.icon)+"sub-el-icon")},null,2)):(l(),b(i,{key:1,"icon-class":e.onlyOneChild.meta.icon||e.item.meta&&e.item.meta.icon},null,8,["icon-class"]))]),_:1},8,["index","class"])]),_:1},8,["to"])):P("",!0)],64)):(l(),b(_,{key:1,ref:"subMenu",index:e.resolvePath(e.item.path),"popper-append-to-body":""},xe({default:m(()=>[(l(!0),f(U,null,Q(e.item.children,g=>(l(),b(c,{key:g.path,"is-nest":!0,item:g,"base-path":e.resolvePath(g.path),class:"nest-menu"},null,8,["item","base-path"]))),128))]),_:2},[e.item.meta?{name:"title",fn:m(()=>[e.item.meta.icon.includes("el-icon")?(l(),f("i",{key:0,class:D(e.item.meta&&e.item.meta.icon+"sub-el-icon")},null,2)):(l(),b(i,{key:1,"icon-class":e.item.meta&&e.item.meta.icon},null,8,["icon-class"])),v("span",null,M(e.item.meta.title),1)])}:void 0]),1032,["index"]))]))}var ts=L(Zt,[["render",es]]);const ss=C({components:{Logo:Xt,SidebarItem:ts},setup(){const e=N(),t=z(),s=J(),n=T({routes:S(()=>t.options.routes),activeMenu:S(()=>{const o=s,{meta:d,path:i}=o;return d.activeMenu?d.activeMenu:i}),showLogo:S(()=>e.getters.sidebarLogo),isCollapse:S(()=>!e.getters.sidebar.opened)});return V({},y(n))}});function ns(e,t,s,n,o,d){const i=u("logo"),a=u("sidebar-item"),r=u("el-menu"),c=u("el-scrollbar");return l(),f("div",{class:D({"has-logo":e.showLogo})},[e.showLogo?(l(),b(i,{key:0,collapse:e.isCollapse},null,8,["collapse"])):P("",!0),h(c,{"wrap-class":"scrollbar-wrapper"},{default:m(()=>[h(r,{"default-active":e.activeMenu,collapse:e.isCollapse,"background-color":"#20222a","text-color":"#bfcbd9","unique-opened":!1,"active-text-color":"#ffffff","collapse-transition":!1,mode:"vertical"},{default:m(()=>[(l(!0),f(U,null,Q(e.routes,_=>(l(),b(a,{key:_.path,item:_,"base-path":_.path},null,8,["item","base-path"]))),128))]),_:1},8,["default-active","collapse"])]),_:1})],2)}var os=L(ss,[["render",ns]]);const as=C({components:{},setup(){const e=N();let t=T({app_version:"v1.0.0"});const s=T({tagsView:S({get(){return e.getters.tagsView},set(n){e.dispatch("settings/changeSetting",{key:"tagsView",value:n})}}),sidebarLogo:S({get(){return e.getters.sidebarLogo},set(n){e.dispatch("settings/changeSetting",{key:"sidebarLogo",value:n})}})});return V(V({},y(t)),y(s))}}),ce=e=>(oe("data-v-2cf4bd30"),e=e(),ae(),e),is={class:"drawer-container"},rs=ce(()=>v("h3",{class:"drawer-title"},"\u9875\u9762\u8BBE\u7F6E",-1)),ls={class:"drawer-item"},cs=ce(()=>v("span",null,"\u6807\u7B7E\u9875",-1)),ds={class:"drawer-item"},us=ce(()=>v("span",null,"\u4FA7\u8FB9\u680FLogo",-1)),ps={class:"drawer-item"};function _s(e,t,s,n,o,d){const i=u("el-switch");return l(),f("div",is,[v("div",null,[rs,v("div",ls,[cs,h(i,{modelValue:e.tagsView,"onUpdate:modelValue":t[0]||(t[0]=a=>e.tagsView=a),class:"drawer-switch"},null,8,["modelValue"])]),v("div",ds,[us,h(i,{modelValue:e.sidebarLogo,"onUpdate:modelValue":t[1]||(t[1]=a=>e.sidebarLogo=a),class:"drawer-switch"},null,8,["modelValue"])]),v("div",ps,[v("span",null,"\u5F53\u524D\u7248\u672C\uFF1A"+M(e.app_version),1)])])])}var hs=L(as,[["render",_s],["__scopeId","data-v-2cf4bd30"]]);const ms=C({name:"AppMain",components:{},setup(){const e=N(),t=z(),s=T({keep_alive_list:S(()=>{let n=[],o=[],d=t.options.routes,i=(a,r)=>{r.forEach(c=>{c.meta&&c.meta.keepAlive&&a.push(c.name),c.children&&c.children.length>0&&i(a,c.children)})};return i(n,d),n.forEach(a=>{e.state.tagsView.cachedViews.includes(a)&&o.push(a)}),o})});return V({},y(s))}}),fs={class:"app-main"};function gs(e,t,s,n,o,d){const i=u("router-view");return l(),f("section",fs,[h(i,null,{default:m(({Component:a,route:r})=>[h(Ee,{appear:"",name:"fade-slide",mode:"out-in"},{default:m(()=>[(l(),b(et,{include:e.keep_alive_list},[(l(),b(Se(a),{key:r.name}))],1032,["include"]))]),_:2},1024)]),_:1})])}var vs=L(ms,[["render",gs],["__scopeId","data-v-187086e1"]]);const ws=C({components:{},setup(){const{proxy:e}=$e(),t=N(),s=z(),n=J();let o=T({visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}),d=[];const i=p=>{d.push(p)},a=4,r=ne(null),c=T({visitedViews:S(()=>t.getters.visitedViews),routes:S(()=>t.getters.permission_routes)}),_=S(()=>r.value.$refs.wrap);W(n,()=>{I(),B()}),W(()=>o.visible,p=>{p?document.body.addEventListener("click",te):document.body.removeEventListener("click",te)}),Y(()=>{R(),I(),_.value.addEventListener("scroll",se,!0)}),ee(()=>{_.value.removeEventListener("scroll",se)});const g=p=>p.path===n.path,O=p=>p.meta&&p.meta.affix,F=(p,w="/")=>{let $=[];return p.forEach(E=>{if(E.meta&&E.meta.affix){const k=ie.resolve(w,E.path);$.push({fullPath:k,path:k,name:E.name,meta:V({},E.meta)})}if(E.children){const k=F(E.children,E.path);k.length>=1&&($=[...$,...k])}}),$},R=()=>{const p=o.affixTags=F(c.routes);for(const w of p)w.name&&t.dispatch("tagsView/addVisitedView",w)},I=()=>{const{name:p}=n;return p&&t.dispatch("tagsView/addView",n),!1},B=()=>{const p=d;re(()=>{for(const w of p)if(w&&w.to.path===n.path){We(w),w.to.fullPath!==n.fullPath&&t.dispatch("tagsView/updateVisitedView",n);break}})},x=p=>{t.dispatch("tagsView/delCachedView",p).then(()=>{const{fullPath:w}=p;re(()=>{s.replace({path:"/redirect"+w})})})},Pe=p=>{t.dispatch("tagsView/delView",p).then(({visitedViews:w})=>{g(p)&&pe(w,p)})},Oe=()=>{s.push(o.selectedTag),t.dispatch("tagsView/delOthersViews",o.selectedTag).then(()=>{B()})},Re=p=>{t.dispatch("tagsView/delAllViews").then(({visitedViews:w})=>{o.affixTags.some($=>$.fullPath===n.path)||pe(w,p)})},pe=(p,w)=>{const $=p.slice(-1)[0];$?s.push($.fullPath):w.name==="Dashboard"?s.replace({path:"/redirect"+w.fullPath}):s.push("/")},Be=(p,w)=>{const $=105,E=e.$el.getBoundingClientRect().left,K=e.$el.offsetWidth-$,X=w.clientX-E+15;X>K?o.left=K:o.left=X,o.top=39,o.visible=!0,o.selectedTag=p},te=()=>{o.visible=!1},se=()=>{te()},Ne=p=>{const w=p.wheelDelta||-p.deltaY*40,$=_.value;$.scrollLeft=$.scrollLeft+w/4},We=p=>{const $=r.value.$el.offsetWidth,E=_.value,k=d;let K=null,X=null;if(k.length>0&&(K=k[0],X=k[k.length-1]),K===p)E.scrollLeft=0;else if(X===p)E.scrollLeft=E.scrollWidth-$;else{const _e=k.findIndex(He=>He===p),Me=k[_e-1],he=k[_e+1],me=he.$el.offsetLeft+he.$el.offsetWidth+a,fe=Me.$el.offsetLeft-a;me>E.scrollLeft+$?E.scrollLeft=me-$:fe<E.scrollLeft&&(E.scrollLeft=fe)}};return A(V(A(V({},y(o)),{setTagRef:i}),y(c)),{scrollContainer:r,isActive:g,isAffix:O,refreshSelectedTag:x,closeSelectedTag:Pe,closeOthersTags:Oe,closeAllTags:Re,openMenu:Be,handleScroll:se,handleScrollBar:Ne})}}),bs={id:"tags-view-container",class:"tags-view-container"},Vs={style:{"vertical-align":"middle"}};function $s(e,t,s,n,o,d){const i=u("close"),a=u("el-icon"),r=u("router-link"),c=u("el-scrollbar");return l(),f("div",bs,[h(c,{ref:"scrollContainer",class:"scroll-container","wrap-class":"tags-view-wrapper",onScroll:e.handleScroll,onWheel:j(e.handleScrollBar,["prevent"])},{default:m(()=>[(l(!0),f(U,null,Q(e.visitedViews,_=>(l(),b(r,{ref:e.setTagRef,key:_.path,class:D([e.isActive(_)?"active":"","tags-view-item"]),to:{path:_.path,query:_.query,fullPath:_.fullPath},tag:"span",onMouseup:j(g=>e.isAffix(_)?"":e.closeSelectedTag(_),["middle"]),onContextmenu:j(g=>e.openMenu(_,g),["prevent"])},{default:m(()=>[v("span",Vs,M(_.title),1),e.isAffix(_)?P("",!0):(l(),b(a,{key:0,class:"icon",onClick:j(g=>e.closeSelectedTag(_),["prevent","stop"]),style:{"margin-left":"4px","vertical-align":"middle"}},{default:m(()=>[h(i)]),_:2},1032,["onClick"]))]),_:2},1032,["class","to","onMouseup","onContextmenu"]))),128))]),_:1},8,["onScroll","onWheel"]),tt(v("ul",{style:be({left:e.left+"px",top:e.top+"px"}),class:"contextmenu"},[v("li",{onClick:t[0]||(t[0]=_=>e.refreshSelectedTag(e.selectedTag))},"\u5237\u65B0"),e.isAffix(e.selectedTag)?P("",!0):(l(),f("li",{key:0,onClick:t[1]||(t[1]=_=>e.closeSelectedTag(e.selectedTag))},"\u5173\u95ED\u5F53\u524D")),v("li",{onClick:t[2]||(t[2]=(..._)=>e.closeOthersTags&&e.closeOthersTags(..._))},"\u5173\u95ED\u5176\u4ED6"),v("li",{onClick:t[3]||(t[3]=_=>e.closeAllTags(e.selectedTag))},"\u5173\u95ED\u6240\u6709")],4),[[st,e.visible]])])}var Es=L(ws,[["render",$s],["__scopeId","data-v-22a53062"]]);const Ss=C({name:"Layout",components:{Sidebar:os,Navbar:jt,TagsView:Es,AppMain:vs,RightPanel:gt,Settings:hs},setup(){const e=N(),t=J(),{body:s}=document,n=992,o=T({sidebar:S(()=>e.getters.sidebar),device:S(()=>e.getters.device),showSettings:S(()=>e.getters.showSettings),needTagsView:S(()=>e.getters.tagsView),classObj:S(()=>({hideSidebar:!o.sidebar.opened,openSidebar:o.sidebar.opened,withoutAnimation:o.sidebar.withoutAnimation,mobile:o.device==="mobile"}))});W(t,()=>{o.device==="mobile"&&o.sidebar.opened&&e.dispatch("app/closeSideBar",{withoutAnimation:!1})}),Y(()=>{i()&&(e.dispatch("app/toggleDevice","mobile"),e.dispatch("app/closeSideBar",{withoutAnimation:!0}))}),nt(()=>{window.addEventListener("resize",a)}),ee(()=>{window.removeEventListener("resize",a)});const d=()=>{e.dispatch("app/closeSideBar",{withoutAnimation:!1})},i=()=>s.getBoundingClientRect().width-1<n,a=()=>{if(!document.hidden){const r=i();e.dispatch("app/toggleDevice",r?"mobile":"desktop"),r&&e.dispatch("app/closeSideBar",{withoutAnimation:!0})}};return A(V({},y(o)),{handleClickOutside:d})}});function Ts(e,t,s,n,o,d){const i=u("sidebar"),a=u("navbar"),r=u("tags-view"),c=u("app-main"),_=u("settings"),g=u("right-panel");return l(),f("div",{class:D([e.classObj,"app-wrapper"])},[e.device==="mobile"&&e.sidebar.opened?(l(),f("div",{key:0,class:"drawer-bg",onClick:t[0]||(t[0]=(...O)=>e.handleClickOutside&&e.handleClickOutside(...O))})):P("",!0),h(i,{class:"sidebar-container"}),v("div",{class:D([{hasTagsView:e.needTagsView},"main-container"])},[v("div",null,[h(a),e.needTagsView?(l(),b(r,{key:0})):P("",!0)]),h(c),e.showSettings?(l(),b(g,{key:0},{default:m(()=>[h(_)]),_:1})):P("",!0)],2)],2)}var de=L(Ss,[["render",Ts],["__scopeId","data-v-a4373808"]]);const ke=[{path:"/login",component:()=>q(()=>import("./index.07ec5adf.js"),["assets/index.07ec5adf.js","assets/index.346e571a.css","assets/vendor.d9db8d1a.js","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css"]),hidden:!0},{path:"/",component:de,redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:()=>q(()=>import("./index.c31f4476.js"),["assets/index.c31f4476.js","assets/index.272e1297.css","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css","assets/vendor.d9db8d1a.js"]),meta:{title:"\u63A7\u5236\u53F0",icon:"dashboard",affix:!0}}]},{path:"/template",name:"Template",component:de,redirect:"/template/template-list",alwaysShow:!0,hidden:!1,meta:{title:"\u6A21\u677F\u7BA1\u7406",icon:"table"},children:[{path:"template-list",name:"TempalteList",component:"TempalteList",component:()=>q(()=>import("./template-list.75ae2819.js"),["assets/template-list.75ae2819.js","assets/template-list.69d165f5.css","assets/vendor.d9db8d1a.js","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css","assets/template.081beb68.js"]),alwaysShow:!1,hidden:!1,meta:{title:"\u6A21\u677F\u5217\u8868",icon:"table",keepAlive:!1}},{path:"template-designer",redirect:"/design",alwaysShow:!1,hidden:!0,meta:{title:"\u6A21\u677F\u6DFB\u52A0",keepAlive:!1}}]},{path:"/design",name:"TempalteDesigner",alwaysShow:!1,hidden:!0,component:()=>q(()=>import("./template-designer.4455efc5.js"),["assets/template-designer.4455efc5.js","assets/template-designer.e24c7621.css","assets/vendor.d9db8d1a.js","assets/CmsImageTextRow.07ffb70e.js","assets/CmsImageTextRow.56d08152.css","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css","assets/template.081beb68.js"]),meta:{title:"\u6A21\u677F\u8BBE\u8BA1\u7A97\u53E3",keepAlive:!1}},{path:"/redirect",component:de,hidden:!0,children:[{path:"/redirect/:path(.*)",component:()=>q(()=>import("./index.27a14b8d.js"),["assets/index.27a14b8d.js","assets/vendor.d9db8d1a.js"])}]},{path:"/404",component:()=>q(()=>import("./404.a38dfee4.js"),["assets/404.a38dfee4.js","assets/404.4da5b19e.css","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css","assets/vendor.d9db8d1a.js"]),hidden:!0}],Ce=ot({history:at(),scrollBehavior(e,t,s){return s||{x:0,y:0}},routes:ke});function ys(){const e=Ce;Ce.matcher=e.matcher}const ks={sidebar:e=>e.app.sidebar,device:e=>e.app.device,visitedViews:e=>e.tagsView.visitedViews,cachedViews:e=>e.tagsView.cachedViews,token:e=>e.user.token,avatar:e=>e.user.avatar,name:e=>e.user.name,permission_routes:e=>e.permission.routes,addRoutes:e=>e.permission.addRoutes,sidebarLogo:e=>e.settings.sidebarLogo,showSettings:e=>e.settings.showSettings,tagsView:e=>e.settings.tagsView},Cs={sidebar:{opened:H.get("sidebarStatus")?!!+H.get("sidebarStatus"):!0,withoutAnimation:!1},device:"desktop"},Ls={TOGGLE_SIDEBAR:e=>{e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?H.set("sidebarStatus",1):H.set("sidebarStatus",0)},CLOSE_SIDEBAR:(e,t)=>{H.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:(e,t)=>{e.device=t}},Is={toggleSideBar({commit:e}){e("TOGGLE_SIDEBAR")},closeSideBar({commit:e},{withoutAnimation:t}){e("CLOSE_SIDEBAR",t)},toggleDevice({commit:e},t){e("TOGGLE_DEVICE",t)}};var As={namespaced:!0,state:Cs,mutations:Ls,actions:Is},Ds={title:"\u7F51\u7AD9\u540E\u53F0\u7BA1\u7406",showSettings:!0,sidebarLogo:!0,tagsView:!0};const{showSettings:Ps,tagsView:Os,sidebarLogo:Rs}=Ds,Bs={showSettings:Ps,tagsView:Os,sidebarLogo:Rs},Ns={CHANGE_SETTING:(e,{key:t,value:s})=>{e.hasOwnProperty(t)&&(e[t]=s)}},Ws={changeSetting({commit:e},t){e("CHANGE_SETTING",t)}};var Ms={namespaced:!0,state:Bs,mutations:Ns,actions:Ws};const ue="vue3-visual-cms_token";function Le(){return H.get(ue)}function Hs(e){return H.set(ue,e)}function Ie(){return H.remove(ue)}const js="http://www.test.com";let Us=js;const Z=it.create({baseURL:Us,timeout:5e3});Z.interceptors.request.use(e=>(De.getters.token&&(e.headers.Token=Le()),e),e=>(console.log(e),Promise.reject(e)));Z.interceptors.response.use(e=>{const t=e.data;return t.code!==2e4?(Te({message:t.message||"Error",type:"error",duration:5*1e3}),t.code===50008&&rt.confirm("\u8D26\u53F7\u4FE1\u606F\u5DF2\u8FC7\u671F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55","\u786E\u8BA4\u6CE8\u9500",{confirmButtonText:"\u91CD\u65B0\u767B\u5F55",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{De.dispatch("user/resetToken").then(()=>{location.reload()})}),Promise.reject(new Error(t.message||"Error"))):t},e=>(console.log("err"+e),Te({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)));function Gs(e){return Z({url:"/User/Login",method:"post",data:e})}function qs(){return Z({url:"/User/GetUserInfo",method:"get",params:{}})}function Fs(){return Z({url:"/User/Logout",method:"post",data:{}})}const Ae=()=>({token:Le(),name:"",avatar:""}),zs=Ae(),Ks={RESET_STATE:e=>{Object.assign(e,Ae())},SET_TOKEN:(e,t)=>{e.token=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t}},Xs={login({commit:e},t){const{username:s,password:n}=t;return new Promise((o,d)=>{Gs({username:s.trim(),password:n}).then(i=>{const{data:a}=i;e("SET_TOKEN",a.token),Hs(a.token),o()}).catch(i=>{d(i)})})},getUserInfo({commit:e,state:t}){return new Promise((s,n)=>{qs().then(o=>{const{data:d}=o;if(!d)return n("\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55.");const{username:i}=d;e("SET_NAME",i),e("SET_AVATAR","https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif"),s(d)}).catch(o=>{n(o)})})},logout({commit:e,state:t}){return new Promise((s,n)=>{Fs().then(()=>{Ie(),ys(),e("RESET_STATE"),s()}).catch(o=>{n(o)})})},resetToken({commit:e}){return new Promise(t=>{Ie(),e("RESET_STATE"),t()})}};var Ys={namespaced:!0,state:zs,mutations:Ks,actions:Xs};const Js={visitedViews:[],cachedViews:[]},Qs={ADD_VISITED_VIEW:(e,t)=>{e.visitedViews.some(s=>s.path===t.path)||e.visitedViews.push(Object.assign({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:(e,t)=>{e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:(e,t)=>{for(const[s,n]of e.visitedViews.entries())if(n.path===t.path){e.visitedViews.splice(s,1);break}},DEL_CACHED_VIEW:(e,t)=>{const s=e.cachedViews.indexOf(t.name);s>-1&&e.cachedViews.splice(s,1)},DEL_OTHERS_VISITED_VIEWS:(e,t)=>{e.visitedViews=e.visitedViews.filter(s=>s.meta.affix||s.path===t.path)},DEL_OTHERS_CACHED_VIEWS:(e,t)=>{const s=e.cachedViews.indexOf(t.name);s>-1?e.cachedViews=e.cachedViews.slice(s,s+1):e.cachedViews=[]},DEL_ALL_VISITED_VIEWS:e=>{const t=e.visitedViews.filter(s=>s.meta.affix);e.visitedViews=t},DEL_ALL_CACHED_VIEWS:e=>{e.cachedViews=[]},UPDATE_VISITED_VIEW:(e,t)=>{for(let s of e.visitedViews)if(s.path===t.path){s=Object.assign(s,t);break}}},Zs={addView({dispatch:e},t){e("addVisitedView",t),e("addCachedView",t)},addVisitedView({commit:e},t){e("ADD_VISITED_VIEW",t)},addCachedView({commit:e},t){e("ADD_CACHED_VIEW",t)},delView({dispatch:e,state:t},s){return new Promise(n=>{e("delVisitedView",s),e("delCachedView",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delVisitedView({commit:e,state:t},s){return new Promise(n=>{e("DEL_VISITED_VIEW",s),n([...t.visitedViews])})},delCachedView({commit:e,state:t},s){return new Promise(n=>{e("DEL_CACHED_VIEW",s),n([...t.cachedViews])})},delOthersViews({dispatch:e,state:t},s){return new Promise(n=>{e("delOthersVisitedViews",s),e("delOthersCachedViews",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delOthersVisitedViews({commit:e,state:t},s){return new Promise(n=>{e("DEL_OTHERS_VISITED_VIEWS",s),n([...t.visitedViews])})},delOthersCachedViews({commit:e,state:t},s){return new Promise(n=>{e("DEL_OTHERS_CACHED_VIEWS",s),n([...t.cachedViews])})},delAllViews({dispatch:e,state:t},s){return new Promise(n=>{e("delAllVisitedViews",s),e("delAllCachedViews",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delAllVisitedViews({commit:e,state:t}){return new Promise(s=>{e("DEL_ALL_VISITED_VIEWS"),s([...t.visitedViews])})},delAllCachedViews({commit:e,state:t}){return new Promise(s=>{e("DEL_ALL_CACHED_VIEWS"),s([...t.cachedViews])})},updateVisitedView({commit:e},t){e("UPDATE_VISITED_VIEW",t)}};var xs={namespaced:!0,state:Js,mutations:Qs,actions:Zs};const en={routes:[],addRoutes:[]},tn={SET_ROUTES:(e,t)=>{e.addRoutes=t,e.routes=ke.concat(t)}},sn={generateRoutes({commit:e}){return new Promise(t=>{const s=[].concat({path:"/:pathMatch(.*)",component:()=>q(()=>import("./404.a38dfee4.js"),["assets/404.a38dfee4.js","assets/404.4da5b19e.css","assets/componentInstall.166f2505.js","assets/componentInstall.e9fc6257.css","assets/vendor.d9db8d1a.js"]),hidden:!0});e("SET_ROUTES",s),t(s)})}};var nn={namespaced:!0,state:en,mutations:tn,actions:sn};const on=lt({state:{component_tree_list:[],current_node_info:{props:{}},show_border:!0,is_preview:!1},mutations:{SET_COMPONENT_TREE_LIST:(e,t)=>{e.component_tree_list=t},SET_CURRENT_NODE_INFO:(e,t)=>{e.current_node_info=t},SET_IS_PREVIEW:(e,t)=>{e.is_preview=t}},actions:{handleChangeComponentTreeList({commit:e},t){e("SET_COMPONENT_TREE_LIST",t)},handleChangeCurrentNodeInfo({commit:e},t){e("SET_CURRENT_NODE_INFO",t)},handleChangeIsPreview({commit:e},t){e("SET_IS_PREVIEW",t)}},modules:{app:As,settings:Ms,user:Ys,tagsView:xs,permission:nn},getters:ks});var De=on;export{Z as a,Ds as d,Le as g,Ce as r,De as s};

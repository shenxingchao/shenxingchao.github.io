var se=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var ee=(e,t,l)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,S=(e,t)=>{for(var l in t||(t={}))de.call(t,l)&&ee(e,l,t[l]);if(Z)for(var l of Z(t))ce.call(t,l)&&ee(e,l,t[l]);return e},M=(e,t)=>re(e,ie(t));var te=(e,t,l)=>new Promise((g,m)=>{var b=s=>{try{a(l.next(s))}catch(n){m(n)}},d=s=>{try{a(l.throw(s))}catch(n){m(n)}},a=s=>s.done?g(s.value):Promise.resolve(s.value).then(b,d);a((l=l.apply(e,t)).next())});import{d as V,u as z,g as A,t as T,r as f,o as u,j as N,H as P,I as E,c as C,x as i,U as ne,J as oe,S as D,a5 as pe,v as K,Y as ue,D as q,F as Y,h as H,w as G,q as me,P as _e,f as fe,a8 as O,a9 as Q,aa as ge,ab as he,ac as be,C as c,k as U,$ as X,a0 as le,K as ve,ad as ye,A as ke,B as we}from"./vendor.d9db8d1a.js";import{C as Ce,a as De,m as x}from"./CmsImageTextRow.681ea48c.js";import{_ as j}from"./componentInstall.5c20f8f0.js";import{b as $e}from"./template.64e575aa.js";import{a as Ie}from"./index.86dad8f4.js";const Ne=V({name:"ComponentTree",components:{CmsImage:Ce,CmsImageTextRow:De},props:{component_tree_list:{type:Array,default:()=>[]}},setup(e,{emit:t}){const l=z(),{_handleRecursionDelete:g,_handleRecursionGetParentNode:m,_handleRecursionGetNodeByNodeId:b}=x();let d=A({sotre_component_tree_list:l.state.component_tree_list,show_border:!0});const a=p=>{},s=(p,$)=>{let o=null;if(p.id=="block_node"&&(o=m(p,d.sotre_component_tree_list),p=o),!o){g("block_node",d.sotre_component_tree_list);let _={id:"block_node",title:"\u5360\u4F4D\u5757",name:"el-row",props:{},style:"flex-grow: 1;height:100%;max-height:80px;border:1px dashed #cccccc;box-sizing:border-box;background:#fafafa;"};if(p.children){const v=document.getElementById(p.id),k=(h,w=0)=>{w=h.offsetTop;let B=h.offsetParent;return B!=null&&(w+=B.offsetTop,k(B,w)),w};if($.clientY+document.getElementById("designer").scrollTop>=k(v)-1&&$.clientY+document.getElementById("designer").scrollTop<=k(v)+1){o=m(p,d.sotre_component_tree_list),o.children&&(o=o.children);let h=0;for(let w=0;w<o.length;w++)if(o[w].id==p.id){h=w;break}o.splice(h,0,_)}else p.children.push(_)}else p.push(_)}},n=(p,$)=>{let o=null,_=null,v=0,k=!1;if(p.id=="block_node"){o=m(p,d.sotre_component_tree_list),k=!0,_=o.children?o.children:o;for(let w=0;w<_.length;w++)if(_[w].id==p.id){v=w;break}p=o}g("block_node",d.sotre_component_tree_list);let h=JSON.parse($.dataTransfer.getData("node"));if(k){o.children?p.allow?o.children.splice(v,0,h):h={props:{}}:o.splice(v,0,h),l.dispatch("handleChangeCurrentNodeInfo",h);return}if(p.children){const w=document.getElementById(p.id);if($.clientY+document.getElementById("designer").scrollTop==w.offsetTop){o=m(p,d.sotre_component_tree_list),o.children&&(o=o.children);let B=0;for(let F=0;F<o.length;F++)if(o[F].id==p.id){B=F;break}o.splice(B,0,h)}else p.allow?p.children.push(h):h={props:{}}}else p.push(h);l.dispatch("handleChangeCurrentNodeInfo",h)},r=p=>[].includes(p.name)&&l.state.show_border?"padding":"",y=p=>{const $=(_,v=0)=>_.target&&_.target.id?_.target.id:_.id?_.id:v>5?!1:(v++,$(_.target?_.target.parentElement:_.parentElement,v));let o=$(p);if(o){let _=b(o,d.sotre_component_tree_list);l.dispatch("handleChangeCurrentNodeInfo",_);let v=document.getElementsByClassName("border")[0];v&&(v.className=v.className.replace(" border",""));let k=document.getElementById(l.state.current_node_info.id);k&&(k.className=k.className+" border")}};return M(S({},T(d)),{handleDragEnterOnNode:a,handleDragOverOnNode:s,handleDropOnNode:n,handleShowBorder:r,handleClick:y})}});function Be(e,t,l,g,m,b){const d=f("component-tree",!0);return u(!0),N(E,null,P(e.component_tree_list,(a,s)=>(u(),C(ue(a.name),pe({key:a.id+s,id:a.id},a.props,{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,class:e.handleShowBorder(a),style:a.style,draggable:!1,onDragenter:K(e.handleDragEnterOnNode,["stop","prevent"]),onDragover:K(n=>e.handleDragOverOnNode(a,n),["stop","prevent"]),onDrop:K(n=>e.handleDropOnNode(a,n),["stop","prevent"]),onClick:K(e.handleClick,["stop","prevent"])}),{default:i(()=>[ne(oe(a.text)+" ",1),a.children?(u(),C(d,{key:0,component_tree_list:a.children},null,8,["component_tree_list"])):D("",!0)]),_:2},1040,["id","modelValue","onUpdate:modelValue","class","style","onDragenter","onDragover","onDrop","onClick"]))),128)}var Se=j(Ne,[["render",Be],["__scopeId","data-v-bc6121e4"]]);const Te=V({name:"Designer",components:{ComponentTree:Se},setup(){const e=z();q();const t=Y(),{_handleRecursionDelete:l,_handleRecursionMoveNode:g}=x(),m=A({attribute:H({get(){return e.state.current_node_info.props},set(o){}}),component_tree_list:H({get(){return e.state.component_tree_list},set(o){e.dispatch("handleChangeComponentTreeList",o)}})});G(T(m).attribute,(o,_)=>{_e(()=>{let v=document.getElementsByClassName("border")[0];v&&(v.className=v.className.replace(" border","")),document.getElementById("toolbar")&&document.getElementById("toolbar").remove();let k=document.getElementById(e.state.current_node_info.id);if(k){k.className=k.className+" border";let h=document.createElement("div");h.id="toolbar",h.style="position: relative;top: 0;height: 0;z-index: 100;width: 100%;",k.before(h),fe({setup(L){return{}},render(){return O("div",{id:"toolbar-bar"},[O(Q,{id:"move-up-btn"},{default:L=>O(ge)}),O(Q,{id:"move-down-btn"},{default:L=>O(he)}),O(Q,{id:"delete-control-btn"},{default:L=>O(be)})])}}).mount(h);let B=document.getElementById("toolbar-bar");B.style="background: rgba(0,0,0,0.5);display: flex;justify-content: end;padding: 10px;align-items: center;";const F=document.getElementById("move-up-btn"),J=document.getElementById("move-down-btn"),I=document.getElementById("delete-control-btn");F.onclick=()=>{p(!0)},J.onclick=()=>{p(!1)},I.onclick=()=>{y()}}})},{deep:!0});let b=A({ruleForm:{id:t.query.id}});me(()=>{b.ruleForm.id&&d()});const d=()=>{$e({id:b.ruleForm.id}).then(o=>{m.component_tree_list=o.data.component_tree_list}).catch(()=>{})},a=o=>{},s=o=>{o.preventDefault();let _=!1,v=o.clientY+document.getElementById("designer").scrollTop;for(let h=0;h<m.component_tree_list.length;h++){const w=m.component_tree_list[h],B=document.getElementById(w.id);if(h==0&&v<B.offsetTop){_=!0,b.insert_index=0;break}else if(v<B.offsetTop+B.offsetHeight/2){_=!0,b.insert_index=h;break}else if(h==m.component_tree_list.length-1&&!_){b.insert_index=h+1;break}}l("block_node",m.component_tree_list);let k={id:"block_node",title:"",name:"el-row",props:{},style:"flex-grow: 1;height:100%;max-height:80px;border:1px dashed #cccccc;box-sizing:border-box;background:#fafafa;"};m.component_tree_list.splice(b.insert_index,0,k)},n=o=>{},r=o=>{o.preventDefault(),l("block_node",m.component_tree_list);let _=JSON.parse(o.dataTransfer.getData("node"));m.component_tree_list.splice(b.insert_index,0,_),e.dispatch("handleChangeCurrentNodeInfo",_)},y=()=>{e.state.current_node_info.id&&(l(e.state.current_node_info.id,m.component_tree_list),e.dispatch("handleChangeCurrentNodeInfo",{props:{}}))},p=o=>{let _=e.state.current_node_info;_.id&&(m.component_tree_list=g(_,m.component_tree_list,o),e.dispatch("handleChangeCurrentNodeInfo",{props:{}}),e.dispatch("handleChangeCurrentNodeInfo",_))},$=o=>{if(o.target.id=="designer"){let _=document.getElementsByClassName("border")[0];_&&(_.className=_.className.replace(" border","")),e.dispatch("handleChangeCurrentNodeInfo",{props:{}})}};return M(S(S({},T(b)),T(m)),{handleDragEnter:a,handleDragOver:s,handleDragLeave:n,handleDrop:r,handleClick:$})}});function Ue(e,t,l,g,m,b){const d=f("component-tree"),a=f("el-empty"),s=f("el-container"),n=f("el-main");return u(),C(n,{class:"designer-container"},{default:i(()=>[c(s,{class:"designer-container-box"},{default:i(()=>[U("div",{id:"designer",onDragenter:t[0]||(t[0]=(...r)=>e.handleDragEnter&&e.handleDragEnter(...r)),onDragover:t[1]||(t[1]=(...r)=>e.handleDragOver&&e.handleDragOver(...r)),onDragleave:t[2]||(t[2]=(...r)=>e.handleDragLeave&&e.handleDragLeave(...r)),onDrop:t[3]||(t[3]=(...r)=>e.handleDrop&&e.handleDrop(...r)),onClick:t[4]||(t[4]=(...r)=>e.handleClick&&e.handleClick(...r))},[e.component_tree_list.length!=0?(u(),C(d,{key:0,component_tree_list:e.component_tree_list},null,8,["component_tree_list"])):(u(),C(a,{key:1,description:"\u8BD5\u8BD5\u5F80\u91CC\u9762\u62D6\u4E00\u4E2A\u7EC4\u4EF6"}))],32)]),_:1})]),_:1})}var Ae=j(Te,[["render",Ue],["__scopeId","data-v-7fde163d"]]);const Ee={components:[{title:"\u57FA\u7840\u6A21\u5757",type:"Basic",children:[{name:"cms-image",title:"\u56FE\u7247\u7EC4\u4EF6",props:{src:"https://2.ss.faisys.com/image/materialLib/image/3000338.jpg?v=201712181730"},allow:!1,children:[]},{name:"cms-image-text-row",title:"\u56FE\u7247\u6587\u5B57\u7EC4\u4EF6",props:{fontSize:18,items:[{src:"https://1.s140i.faiusr.com/2/AIwBCAAQAhgAILqXm9oFKNDHvkowgA84gAo!500x500.jpg",text:"\u9884\u6D4B\u4F01\u4E1A\u672A\u6765\u7684\u7ECF\u8425\u65B9\u7565\uFF0C\u4E0D\u65AD\u5730\u8FDB\u884C\u66F4\u65B0\u3002\u4F01\u4E1A\u7684\u4E1A\u52A1\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u4E5F\u4E0D\u9700\u8981\u989D\u5916\u8FDB\u884C\u7CFB\u7EDF\u5F00\u53D1\uFF0C\u4FBF\u53EF\u4F7F\u7528\u5BF9\u5E94\u529F\u80FD\u3002\u901A\u8FC7\u4E0D\u61C8\u5730\u53D1\u5C55\uFF0C\u4E0D\u4EC5\u662F\u73B0\u5728\uFF0C\u5728\u672A\u676510\u5E74\u4E5F\u53EF\u4EE5\u901A\u8FC7\u6211\u4EEC\u7BA1\u7406\u4F01\u4E1A\u7684\u6240\u6709\u4E1A\u52A1\u3002"},{src:"https://1.s140i.faiusr.com/2/AIwBCAAQAhgAILqXm9oFKNDHvkowgA84gAo!500x500.jpg",text:"\u9884\u6D4B\u4F01\u4E1A\u672A\u6765\u7684\u7ECF\u8425\u65B9\u7565\uFF0C\u4E0D\u65AD\u5730\u8FDB\u884C\u66F4\u65B0\u3002\u4F01\u4E1A\u7684\u4E1A\u52A1\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u4E5F\u4E0D\u9700\u8981\u989D\u5916\u8FDB\u884C\u7CFB\u7EDF\u5F00\u53D1\uFF0C\u4FBF\u53EF\u4F7F\u7528\u5BF9\u5E94\u529F\u80FD\u3002\u901A\u8FC7\u4E0D\u61C8\u5730\u53D1\u5C55\uFF0C\u4E0D\u4EC5\u662F\u73B0\u5728\uFF0C\u5728\u672A\u676510\u5E74\u4E5F\u53EF\u4EE5\u901A\u8FC7\u6211\u4EEC\u7BA1\u7406\u4F01\u4E1A\u7684\u6240\u6709\u4E1A\u52A1\u3002"},{src:"https://1.s140i.faiusr.com/2/AIwBCAAQAhgAILqXm9oFKNDHvkowgA84gAo!500x500.jpg",text:"\u9884\u6D4B\u4F01\u4E1A\u672A\u6765\u7684\u7ECF\u8425\u65B9\u7565\uFF0C\u4E0D\u65AD\u5730\u8FDB\u884C\u66F4\u65B0\u3002\u4F01\u4E1A\u7684\u4E1A\u52A1\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u4E5F\u4E0D\u9700\u8981\u989D\u5916\u8FDB\u884C\u7CFB\u7EDF\u5F00\u53D1\uFF0C\u4FBF\u53EF\u4F7F\u7528\u5BF9\u5E94\u529F\u80FD\u3002\u901A\u8FC7\u4E0D\u61C8\u5730\u53D1\u5C55\uFF0C\u4E0D\u4EC5\u662F\u73B0\u5728\uFF0C\u5728\u672A\u676510\u5E74\u4E5F\u53EF\u4EE5\u901A\u8FC7\u6211\u4EEC\u7BA1\u7406\u4F01\u4E1A\u7684\u6240\u6709\u4E1A\u52A1\u3002"}]},allow:!1,children:[]}]},{title:"\u9AD8\u7EA7\u6A21\u5757",type:"Advanced",children:[]}]};var Fe="/assets/cms-image.fc0dcb6c.png",Le="/assets/cms-image-text-row.0c4b5bc1.png";const Me=V({name:"Template",components:{},setup(){const e=z();q(),Y();const{_handleRecursionDelete:t}=x();let l=A({component_type:"Basic",component_images:{cms_image:Fe,cms_image_text_row:Le}});const g=d=>{},m=(d,a)=>{d.id="node-"+new Date().getTime(),d.children.forEach(s=>{s.id="node-"+new Date().getTime()}),a.dataTransfer.setData("node",JSON.stringify(d))},b=d=>{t("block_node",e.state.component_tree_list)};return M(S({},T(l)),{components_list:Ee,handleChangeTab:g,handleDragStart:m,handleDragEnterContrlList:b})}}),Ve=["onDragstart"],Oe=["src","title"],je=["src","title"];function ze(e,t,l,g,m,b){const d=f("el-tab-pane"),a=f("el-tabs"),s=f("el-aside");return u(),C(s,{class:"control-bar",width:"200px"},{default:i(()=>[c(a,{id:"components-window-tab",type:"border-card",modelValue:e.component_type,"onUpdate:modelValue":t[0]||(t[0]=n=>e.component_type=n),onTabClick:e.handleChangeTab,onDragenter:e.handleDragEnterContrlList},{default:i(()=>[(u(!0),N(E,null,P(e.components_list.components,(n,r)=>(u(),C(d,{key:r,class:"components-window-tab-content",label:n.title,name:n.type},{default:i(()=>[(u(!0),N(E,null,P(n.children,(y,p)=>(u(),N("div",{key:p,class:"component",draggable:!0,onDragstart:$=>e.handleDragStart(y,$)},[y.name=="cms-image"?(u(),N("img",{key:0,class:"component-image",src:e.component_images.cms_image,title:y.title},null,8,Oe)):D("",!0),y.name=="cms-image-text-row"?(u(),N("img",{key:1,class:"component-image",src:e.component_images.cms_image_text_row,title:y.title},null,8,je)):D("",!0)],40,Ve))),128))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue","onTabClick","onDragenter"])]),_:1})}var He=j(Me,[["render",ze],["__scopeId","data-v-2cb591d7"]]);function ae(e){return Ie({url:"/Upload/FileUpload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}const Re=V({name:"Upload",components:{},props:{file:{type:String,default:""},fileType:{type:String,default:"image/*"},multiple:{type:Boolean,defalut:!1},limit:{type:Number,default:3},files:{type:Array,default:function(){return[]}}},emits:["handleUploadSuccess","handleDeleteFile","handleClickDeleteMultiple","handleUploadMultipleSuccess"],setup(e,{emit:t}){const{proxy:l}=ve();let g=A({imgUrl:"",imgList:[],isShowOpt:!1});G(()=>e.file,s=>{g.imgUrl=s},{immediate:!0}),G(()=>e.files,s=>{g.imgList=[],s.forEach(n=>{g.imgList.push({url:n,isShowMask:!1})})},{immediate:!0});const m=s=>{let n=new FormData;n.append("file",s),ae(n).then(r=>{g.imgUrl=r.data.imgUrl,l.$message({message:"\u4E0A\u4F20\u6210\u529F",type:"success",onClose:function(){}}),t("handleUploadSuccess",g.imgUrl)}).catch(()=>{})},b=()=>{g.imgUrl="",t("handleDeleteFile")},d=s=>{g.imgList.splice(s,1);let n=[...g.imgList].map(r=>r.url);t("handleClickDeleteMultiple",n)},a=s=>{if(s.length+g.imgList.length>e.limit)return l.$message({type:"error",message:"\u6700\u591A\u53EF\u4E0A\u4F20"+e.limit+"\u5F20"}),!1;new Promise(n=>{Array.from(s).forEach((r,y)=>te(this,null,function*(){let p=new FormData;p.append("file",r),yield ae(p).then($=>{g.imgList.push({url:$.data.imgUrl,isShowMask:!1}),y==s.length-1&&n()}).catch(()=>{})}))}).then(()=>{l.$message({type:"success",message:"\u56FE\u7247\u5217\u8868\u4E0A\u4F20\u6210\u529F"});let n=[...g.imgList].map(r=>r.url);t("handleUploadMultipleSuccess",n)})};return M(S({},T(g)),{handleUploadFile:m,handleClickDelete:b,handleClickDeleteMultiple:d,handleUploadFiles:a})}}),Pe={class:"upload-file-commpent"},qe=["src"],Ye={class:"opt"},Je=["accept"],Ke=["onMouseenter","onMouseleave"],Ge=["src"],Qe={class:"opt"},Xe=["accept","multiple"];function xe(e,t,l,g,m,b){const d=f("delete"),a=f("el-icon"),s=f("plus");return u(),N("div",Pe,[e.multiple?D("",!0):(u(),N(E,{key:0},[e.imgUrl?(u(),N("div",{key:0,class:"uplaod-file-preview",onMouseenter:t[1]||(t[1]=n=>e.isShowOpt=!0),onMouseleave:t[2]||(t[2]=n=>e.isShowOpt=!1)},[U("img",{src:e.imgUrl,alt:"\u4E0A\u4F20\u6210\u529F\u56FE\u7247"},null,8,qe),X(U("div",Ye,[c(a,{class:"delete-btn",onClick:t[0]||(t[0]=n=>e.handleClickDelete())},{default:i(()=>[c(d)]),_:1})],512),[[le,e.isShowOpt]])],32)):D("",!0),e.imgUrl?D("",!0):(u(),N("div",{key:1,class:"upload-file-btn",onClick:t[4]||(t[4]=n=>e.$refs.file.click())},[c(a,null,{default:i(()=>[c(s)]),_:1}),U("input",{ref:"file",type:"file",class:"upload-file-input",accept:e.fileType,onChange:t[3]||(t[3]=n=>e.handleUploadFile(n.target.files[0]))},null,40,Je)]))],64)),e.multiple?(u(),N(E,{key:1},[(u(!0),N(E,null,P(e.imgList,(n,r)=>(u(),N("div",{key:r,class:"uplaod-file-preview",onMouseenter:y=>n.isShowMask=!0,onMouseleave:y=>n.isShowMask=!1},[U("img",{src:n.url,alt:"\u4E0A\u4F20\u6210\u529F\u56FE\u7247"},null,8,Ge),X(U("div",Qe,[c(a,{class:"delete-btn",onClick:y=>e.handleClickDeleteMultiple(r)},{default:i(()=>[c(d)]),_:2},1032,["onClick"])],512),[[le,n.isShowMask]])],40,Ke))),128)),e.imgList.length<e.limit?(u(),N("div",{key:0,class:"upload-file-btn",onClick:t[6]||(t[6]=n=>e.$refs.files.click())},[c(a,null,{default:i(()=>[c(s)]),_:1}),U("input",{ref:"files",type:"file",class:"upload-file-input",accept:e.fileType,multiple:e.multiple,onChange:t[5]||(t[5]=n=>e.handleUploadFiles(n.target.files))},null,40,Xe)])):D("",!0)],64)):D("",!0)])}var We=j(Re,[["render",xe],["__scopeId","data-v-633f404f"]]);const Ze=V({name:"Attribute",components:{Upload:We},props:{showAttributeDialog:{type:Boolean,default:!0}},emits:["handleCloseDialog"],setup(e,{emit:t}){const l=z();q(),Y();const g=A({node_info:H({get(){return l.state.current_node_info},set(r){}}),attribute:H({get(){return l.state.current_node_info.props},set(r){}})});let m=A({tab_active_name:"1",show_setting_dialog:!1});const b=()=>{t("handleCloseDialog")},d=r=>{r.length<8&&r.push(r[0])},a=(r,y)=>{r.length>1&&r.splice(y,1)},s=(r,y)=>{y.src=r},n=r=>{r.src=""};return M(S(S({},T(m)),T(g)),{handleCloseDialog:b,handleClickAddCmsImageTextItem:d,handleClickDeleteCmsImageTextItem:a,handleUploadSuccess:s,handleDeleteFile:n})}}),et={id:"attibute_setting_dialog"};function tt(e,t,l,g,m,b){const d=f("upload"),a=f("el-row"),s=f("el-form-item"),n=f("el-input-number"),r=f("setting"),y=f("el-icon"),p=f("el-button"),$=f("el-form"),o=f("el-tab-pane"),_=f("el-tabs"),v=f("el-input"),k=f("el-col"),h=f("minus"),w=f("plus"),B=f("el-dialog"),F=f("el-aside"),J=ye("el-drag-dialog");return u(),C(F,{class:"attribute",width:"300px"},{default:i(()=>[c(_,{id:"attribute-window-tab",type:"border-card",modelValue:e.tab_active_name,"onUpdate:modelValue":t[4]||(t[4]=I=>e.tab_active_name=I)},{default:i(()=>[c(o,{class:"attribute-window-tab-content",name:"1",label:"\u5C5E\u6027\u680F"},{default:i(()=>[U("h4",null,oe(e.node_info.title),1),c($,{ref:"attribute",model:e.attribute,"label-width":"68px"},{default:i(()=>[e.node_info.name=="cms-image"?(u(),C(s,{key:0,label:"\u56FE\u7247\u8BBE\u7F6E"},{default:i(()=>[c(a,{class:"block-margin",justify:"start",align:"middle",type:"flex"},{default:i(()=>[c(d,{file:e.attribute.src,onHandleUploadSuccess:t[0]||(t[0]=I=>{e.handleUploadSuccess(I,e.attribute)}),onHandleDeleteFile:t[1]||(t[1]=I=>e.handleDeleteFile(e.attribute))},null,8,["file"])]),_:1})]),_:1})):D("",!0),e.node_info.name=="cms-image-text-row"?(u(),N(E,{key:1},[e.attribute.fontSize?(u(),C(s,{key:0,label:"\u5B57\u4F53\u5927\u5C0F"},{default:i(()=>[c(n,{modelValue:e.attribute.fontSize,"onUpdate:modelValue":t[2]||(t[2]=I=>e.attribute.fontSize=I),controls:!0,min:12,max:24},null,8,["modelValue"])]),_:1})):D("",!0),c(s,{label:"\u9009\u9879\u8BBE\u7F6E"},{default:i(()=>[c(p,{size:"mini",type:"primary",onClick:t[3]||(t[3]=I=>e.show_setting_dialog=!0)},{default:i(()=>[c(y,null,{default:i(()=>[c(r)]),_:1})]),_:1})]),_:1})],64)):D("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),X(U("div",et,[c(B,{title:e.node_info.title,"model-value":e.show_setting_dialog,onClose:t[6]||(t[6]=I=>e.show_setting_dialog=!1)},{default:i(()=>[c($,{ref:"attribute",model:e.attribute,"label-width":"68px"},{default:i(()=>[e.node_info.name=="cms-image-text-row"?(u(),C(s,{key:0,label:"\u9009\u9879\u8BBE\u7F6E"},{default:i(()=>[(u(!0),N(E,null,P(e.attribute.items,(I,L)=>(u(),C(a,{key:L,class:"block-margin",justify:"space-between",align:"middle",type:"flex"},{default:i(()=>[c(k,{span:14},{default:i(()=>[c(v,{type:"textarea",modelValue:I.text,"onUpdate:modelValue":R=>I.text=R,placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u6587\u5B57",rows:4,autosize:!1,resize:"both",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),c(k,{span:5},{default:i(()=>[c(d,{file:I.src,onHandleUploadSuccess:R=>{e.handleUploadSuccess(R,I)},onHandleDeleteFile:R=>e.handleDeleteFile(I)},null,8,["file","onHandleUploadSuccess","onHandleDeleteFile"])]),_:2},1024),c(k,{span:3},{default:i(()=>[L>0?(u(),C(p,{key:0,size:"mini",type:"danger",onClick:R=>e.handleClickDeleteCmsImageTextItem(e.attribute.items,L)},{default:i(()=>[c(y,null,{default:i(()=>[c(h)]),_:1})]),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)]),_:2},1024))),128)),c(a,null,{default:i(()=>[c(k,{span:4},{default:i(()=>[c(p,{size:"mini",type:"primary",onClick:t[5]||(t[5]=I=>e.handleClickAddCmsImageTextItem(e.attribute.items))},{default:i(()=>[c(y,null,{default:i(()=>[c(w)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1},8,["model"])]),_:1},8,["title","model-value"])],512),[[J]])]),_:1})}var nt=j(Ze,[["render",tt],["__scopeId","data-v-dc26e8fe"]]);const ot=V({name:"HeaderBar",components:{},setup(){const e=z();q();const t=Y(),l=A({is_preview:H({get(){return e.state.is_preview}})});let g=A({ruleForm:{id:t.query.id}});const m=()=>{e.dispatch("handleChangeCurrentNodeInfo",{props:{}}),e.dispatch("handleChangeIsPreview",!e.state.is_preview),console.log(l.is_preview)};return M(S(S({},T(g)),T(l)),{handleChangeIsPreview:m})}}),W=e=>(ke("data-v-23e4eb04"),e=e(),we(),e),lt=W(()=>U("span",null,"\u9884\u89C8",-1)),at=W(()=>U("span",null,"\u4FDD\u5B58\uFF08\u65B0\u589E\uFF09",-1)),st=W(()=>U("span",null,"\u4FDD\u5B58\uFF08\u7F16\u8F91\uFF09",-1)),rt=ne(" \u9000\u51FA\u9884\u89C8 ");function it(e,t,l,g,m,b){const d=f("el-button"),a=f("el-row"),s=f("el-container"),n=f("el-header");return u(),N(E,null,[e.is_preview?D("",!0):(u(),C(n,{key:0,class:"header-bar"},{default:i(()=>[c(s,{class:"header-bar-container",direction:"vertical"},{default:i(()=>[c(a,{justify:"center",align:"middle",type:"flex"},{default:i(()=>[c(d,{size:"medium",type:"primary",onClick:e.handleChangeIsPreview},{default:i(()=>[lt]),_:1},8,["onClick"]),e.ruleForm.id?D("",!0):(u(),C(d,{key:0,size:"medium",type:"primary"},{default:i(()=>[at]),_:1})),e.ruleForm.id?(u(),C(d,{key:1,size:"medium",type:"primary"},{default:i(()=>[st]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1})),e.is_preview?(u(),C(a,{key:1,class:"preview-bar",justify:"center",align:"middle",type:"flex"},{default:i(()=>[c(d,{size:"medium",type:"primary",onClick:e.handleChangeIsPreview},{default:i(()=>[rt]),_:1},8,["onClick"])]),_:1})):D("",!0)],64)}var dt=j(ot,[["render",it],["__scopeId","data-v-23e4eb04"]]);const ct=V({name:"Template",components:{Designer:Ae,ControlBar:He,Attribute:nt,HeaderBar:dt},setup(){const e=z();q(),Y();const t=A({is_preview:H({get(){return e.state.is_preview}})});let l=A({});return S(S({},T(l)),T(t))}});function pt(e,t,l,g,m,b){const d=f("header-bar"),a=f("control-bar"),s=f("designer"),n=f("attribute"),r=f("el-container");return u(),C(r,{class:"container-layout"},{default:i(()=>[c(d),c(r,{class:"container-content"},{default:i(()=>[e.is_preview?D("",!0):(u(),C(a,{key:0})),c(s),e.is_preview?D("",!0):(u(),C(n,{key:1}))]),_:1})]),_:1})}var bt=j(ct,[["render",pt],["__scopeId","data-v-958217a0"]]);export{bt as default};

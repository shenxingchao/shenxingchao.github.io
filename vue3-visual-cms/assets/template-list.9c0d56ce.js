var E=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var z=(e,n,t)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,R=(e,n)=>{for(var t in n||(n={}))q.call(n,t)&&z(e,t,n[t]);if($)for(var t of $(n))N.call(n,t)&&z(e,t,n[t]);return e},V=(e,n)=>A(e,F(n));var T=(e,n,t)=>new Promise((g,_)=>{var p=d=>{try{m(t.next(d))}catch(h){_(h)}},f=d=>{try{m(t.throw(d))}catch(h){_(h)}},m=d=>d.done?g(d.value):Promise.resolve(d.value).then(p,f);m((t=t.apply(e,n)).next())});import{d as U,D as M,g as J,p as K,q as O,t as W,r as o,j,C as a,x as s,o as H,I as G,H as Q,v as I,K as X,k as w,c as Y,U as Z,J as x}from"./vendor.9248e102.js";import{C as P}from"./index.045ce174.js";import{t as ee,a as B,b as te}from"./template.b2db3067.js";import{e as ae}from"./website.b3f7b0b5.js";import{_ as ne}from"./animate.min.023210a1.js";import"./index.dddf7c1a.js";const le=U({name:"TemplateList",components:{CustomTable:P},setup(){const{proxy:e}=X(),n=M();let t=J({List:[],selectionIdList:[],tableHead:[{label:"\u7F16\u53F7",prop:"id",width:60},{label:"\u6A21\u677F\u540D\u79F0",prop:"title",width:300},{label:"\u6240\u5C5E\u7F51\u7AD9",prop:"website_name",width:300},{label:"\u9996\u9875",prop:"is_index",width:300,component:l=>l.is_index?{is:"custom-tag",type:"success",title:"\u662F"}:{is:"custom-tag",type:"danger",title:"\u5426"}},{label:"\u6DFB\u52A0\u65F6\u95F4",prop:"addtime",width:140},{label:"\u4FEE\u6539\u65F6\u95F4",prop:"updatetime",width:140}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",website_id:""},websiteList:[]});const g=K(null);O(()=>T(this,null,function*(){_(),yield p()}));const _=()=>{ae({}).then(l=>{t.websiteList=l.data.data}).catch(()=>{})},p=()=>ee(t.params).then(l=>{t.List=l.data.data,t.params.total=l.data.total}).catch(()=>{}),f=l=>{t.params.pageSize=l,p()},m=l=>{t.params.page=l,p()},d=l=>{t.selectionIdList=l},h=()=>{n.push("/template/template-add")},C=l=>{n.push({path:"/template/template-edit",query:{id:l}})},c=(l,r)=>{C(r.id)},u=(l,r)=>{B({ids:[r.id]}).then(b=>{t.List.splice(l,1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{})},y=()=>{if(t.selectionIdList.length==0)return e.$message({message:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E",type:"error"}),!1;B({ids:t.selectionIdList}).then(l=>{t.List=t.List.filter(r=>t.selectionIdList.indexOf(r.id)==-1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success",onClose:function(){p()}})}).catch(()=>{})},k=()=>{g.value.resetFields()},v=()=>{t.params.page=1,t.params.pageSize=10,p()},L=(l,r)=>{te({id:r.id}).then(b=>{e.$message({message:"\u590D\u5236\u6210\u529F",type:"success",onClose:function(){p()}})}).catch(()=>{})},S=(l,r)=>{const{href:b}=n.resolve({path:"/template/template-designer",query:{id:r.id}});window.open(b)};return V(R({},W(t)),{searchForm:g,handleSizeChange:f,handleCurrentChange:m,handleSelectionChange:d,handleRowDblClick:C,handleAdd:h,handleEdit:c,handleDelete:u,handleDeleteRows:y,onReset:k,onSubmit:v,handleCopyTemplate:L,handleDesignTemplate:S})}}),se={class:"app-container"},oe=w("span",{style:{"vertical-align":"middle"}}," \u67E5\u8BE2 ",-1),ie=w("span",{style:{"vertical-align":"middle"}}," \u91CD\u7F6E ",-1),de=w("span",{style:{"vertical-align":"middle"}}," \u6DFB\u52A0 ",-1),re=w("span",{style:{"vertical-align":"middle"}}," \u5220\u9664 ",-1);function pe(e,n,t,g,_,p){const f=o("el-input"),m=o("el-form-item"),d=o("el-option"),h=o("el-select"),C=o("search"),c=o("el-icon"),u=o("el-button"),y=o("refresh-left"),k=o("plus"),v=o("delete"),L=o("el-form"),S=o("copy-document"),l=o("svg-icon"),r=o("custom-table"),b=o("el-card");return H(),j("div",se,[a(b,{shadow:"hover"},{default:s(()=>[a(r,{id:"template-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0,"opt-width":180,onHandleSizeChange:e.handleSizeChange,onHandleCurrentChange:e.handleCurrentChange,onHandleSelectionChange:e.handleSelectionChange,onHandleRowDblClick:e.handleRowDblClick,onHandleEdit:e.handleEdit,onHandleDelete:e.handleDelete},{searchBar:s(()=>[a(L,{ref:"searchForm",inline:!0,model:e.params,class:"demo-form-inline",size:"mini"},{default:s(()=>[a(m,{prop:"keyword"},{default:s(()=>[a(f,{modelValue:e.params.keyword,"onUpdate:modelValue":n[0]||(n[0]=i=>e.params.keyword=i),placeholder:"\u641C\u7D22\u5173\u952E\u8BCD"},null,8,["modelValue"])]),_:1}),a(m,{prop:"website_id"},{default:s(()=>[a(h,{modelValue:e.params.website_id,"onUpdate:modelValue":n[1]||(n[1]=i=>e.params.website_id=i),placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7F51\u7AD9",clearable:"",onChange:e.onSubmit},{default:s(()=>[(H(!0),j(G,null,Q(e.websiteList,(i,D)=>(H(),Y(d,{label:i.website_name,value:i.id,key:D},{default:s(()=>[Z(x(i.website_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),a(m,null,{default:s(()=>[a(u,{type:"primary",onClick:e.onSubmit},{default:s(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:s(()=>[a(C)]),_:1}),oe]),_:1},8,["onClick"]),a(u,{onClick:n[2]||(n[2]=i=>{e.onReset(),e.onSubmit()})},{default:s(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:s(()=>[a(y)]),_:1}),ie]),_:1}),a(u,{type:"primary",size:"mini",onClick:e.handleAdd},{default:s(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:s(()=>[a(k)]),_:1}),de]),_:1},8,["onClick"]),a(u,{type:"danger",size:"mini",onClick:e.handleDeleteRows},{default:s(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:s(()=>[a(v)]),_:1}),re]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),opt:s(i=>[a(u,{size:"mini",type:"primary",onClick:I(D=>e.handleCopyTemplate(i.scope.$index,i.scope.row),["stop"])},{default:s(()=>[a(c,null,{default:s(()=>[a(S)]),_:1})]),_:2},1032,["onClick"]),a(u,{size:"mini",type:"primary",onClick:I(D=>e.handleDesignTemplate(i.scope.$index,i.scope.row),["stop"])},{default:s(()=>[a(c,null,{default:s(()=>[a(l,{"icon-class":"design"})]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["data","table-head","params","onHandleSizeChange","onHandleCurrentChange","onHandleSelectionChange","onHandleRowDblClick","onHandleEdit","onHandleDelete"])]),_:1})])}var be=ne(le,[["render",pe]]);export{be as default};

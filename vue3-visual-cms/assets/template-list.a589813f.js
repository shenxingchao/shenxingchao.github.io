var E=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var V=(e,n,t)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,R=(e,n)=>{for(var t in n||(n={}))q.call(n,t)&&V(e,t,n[t]);if(z)for(var t of z(n))K.call(n,t)&&V(e,t,n[t]);return e},T=(e,n)=>A(e,F(n));var j=(e,n,t)=>new Promise((g,_)=>{var p=r=>{try{m(t.next(r))}catch(h){_(h)}},f=r=>{try{m(t.throw(r))}catch(h){_(h)}},m=r=>r.done?g(r.value):Promise.resolve(r.value).then(p,f);m((t=t.apply(e,n)).next())});import{d as N,D as U,g as M,q as J,m as O,t as W,r as i,j as I,C as a,x as o,o as H,v as y,ab as G,I as Q,H as X,K as Y,k as v,c as Z,U as x,J as P}from"./vendor.b68ac253.js";import{C as ee}from"./index.0a357597.js";import{t as te,a as B,b as ne}from"./template.c1f414c8.js";import{e as ae}from"./website.55ebdb38.js";import{_ as le}from"./hover.486ea2e3.js";import"./index.e228bf41.js";const oe=N({name:"TemplateList",components:{CustomTable:ee},setup(){const{proxy:e}=Y(),n=U();let t=M({List:[],selectionIdList:[],tableHead:[{label:"\u7F16\u53F7",prop:"id",width:60},{label:"\u6A21\u677F\u540D\u79F0",prop:"title",width:300},{label:"\u6240\u5C5E\u7F51\u7AD9",prop:"website_name",width:300},{label:"\u9996\u9875",prop:"is_index",width:300,component:l=>l.is_index?{is:"custom-tag",type:"success",title:"\u662F"}:{is:"custom-tag",type:"danger",title:"\u5426"}},{label:"\u6DFB\u52A0\u65F6\u95F4",prop:"addtime",width:140},{label:"\u4FEE\u6539\u65F6\u95F4",prop:"updatetime",width:140}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",website_id:""},websiteList:[]});const g=J(null);O(()=>j(this,null,function*(){_(),yield p()}));const _=()=>{ae({}).then(l=>{t.websiteList=l.data.data}).catch(()=>{})},p=()=>te(t.params).then(l=>{t.List=l.data.data,t.params.total=l.data.total}).catch(()=>{}),f=l=>{t.params.pageSize=l,p()},m=l=>{t.params.page=l,p()},r=l=>{t.selectionIdList=l},h=()=>{n.push("/template/template-add")},b=l=>{n.push({path:"/template/template-edit",query:{id:l}})},c=(l,d)=>{b(d.id)},u=(l,d)=>{B({ids:[d.id]}).then(s=>{t.List.splice(l,1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{})},k=()=>{if(t.selectionIdList.length==0)return e.$message({message:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E",type:"error"}),!1;B({ids:t.selectionIdList}).then(l=>{t.List=t.List.filter(d=>t.selectionIdList.indexOf(d.id)==-1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success",onClose:function(){p()}})}).catch(()=>{})},L=()=>{g.value.resetFields()},S=()=>{t.params.page=1,t.params.pageSize=10,p()},$=(l,d)=>{ne({id:d.id}).then(s=>{e.$message({message:"\u590D\u5236\u6210\u529F",type:"success",onClose:function(){p()}})}).catch(()=>{})},D=(l,d)=>{window.open(location.origin+"/#?id="+d.id)},C=(l,d)=>{const{href:s}=n.resolve({path:"/template/template-designer",query:{id:d.id}});window.open(s)};return T(R({},W(t)),{searchForm:g,handleSizeChange:f,handleCurrentChange:m,handleSelectionChange:r,handleRowDblClick:b,handleAdd:h,handleEdit:c,handleDelete:u,handleDeleteRows:k,onReset:L,onSubmit:S,handleCopyTemplate:$,handleViewTemplate:D,handleDesignTemplate:C})}}),se={class:"app-container"},ie=v("span",{style:{"vertical-align":"middle"}}," \u67E5\u8BE2 ",-1),de=v("span",{style:{"vertical-align":"middle"}}," \u91CD\u7F6E ",-1),re=v("span",{style:{"vertical-align":"middle"}}," \u6DFB\u52A0 ",-1),pe=v("span",{style:{"vertical-align":"middle"}}," \u5220\u9664 ",-1);function me(e,n,t,g,_,p){const f=i("el-input"),m=i("el-form-item"),r=i("el-option"),h=i("el-select"),b=i("search"),c=i("el-icon"),u=i("el-button"),k=i("refresh-left"),L=i("plus"),S=i("delete"),$=i("el-form"),D=i("copy-document"),C=i("svg-icon"),l=i("custom-table"),d=i("el-card");return H(),I("div",se,[a(d,{shadow:"hover"},{default:o(()=>[a(l,{id:"template-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0,"opt-width":180,onHandleSizeChange:e.handleSizeChange,onHandleCurrentChange:e.handleCurrentChange,onHandleSelectionChange:e.handleSelectionChange,onHandleRowDblClick:e.handleRowDblClick,onHandleEdit:e.handleEdit,onHandleDelete:e.handleDelete},{searchBar:o(()=>[a($,{ref:"searchForm",inline:!0,model:e.params,class:"demo-form-inline",size:"mini",onSubmit:n[4]||(n[4]=y(()=>{},["prevent"]))},{default:o(()=>[a(m,{prop:"keyword"},{default:o(()=>[a(f,{modelValue:e.params.keyword,"onUpdate:modelValue":n[0]||(n[0]=s=>e.params.keyword=s),placeholder:"\u641C\u7D22\u5173\u952E\u8BCD",onKeyup:n[1]||(n[1]=G(s=>e.onSubmit(),["enter"]))},null,8,["modelValue"])]),_:1}),a(m,{prop:"website_id"},{default:o(()=>[a(h,{modelValue:e.params.website_id,"onUpdate:modelValue":n[2]||(n[2]=s=>e.params.website_id=s),placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7F51\u7AD9",clearable:"",onChange:e.onSubmit},{default:o(()=>[(H(!0),I(Q,null,X(e.websiteList,(s,w)=>(H(),Z(r,{label:s.website_name,value:s.id,key:w},{default:o(()=>[x(P(s.website_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),a(m,null,{default:o(()=>[a(u,{type:"primary",onClick:e.onSubmit},{default:o(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:o(()=>[a(b)]),_:1}),ie]),_:1},8,["onClick"]),a(u,{onClick:n[3]||(n[3]=s=>{e.onReset(),e.onSubmit()})},{default:o(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:o(()=>[a(k)]),_:1}),de]),_:1}),a(u,{type:"primary",size:"mini",onClick:e.handleAdd},{default:o(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:o(()=>[a(L)]),_:1}),re]),_:1},8,["onClick"]),a(u,{type:"danger",size:"mini",onClick:e.handleDeleteRows},{default:o(()=>[a(c,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:o(()=>[a(S)]),_:1}),pe]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),opt:o(s=>[a(u,{size:"mini",type:"primary",onClick:y(w=>e.handleCopyTemplate(s.scope.$index,s.scope.row),["stop"])},{default:o(()=>[a(c,null,{default:o(()=>[a(D)]),_:1})]),_:2},1032,["onClick"]),a(u,{size:"mini",type:"primary",onClick:y(w=>e.handleViewTemplate(s.scope.$index,s.scope.row),["stop"])},{default:o(()=>[a(c,null,{default:o(()=>[a(C,{"icon-class":"eye-open"})]),_:1})]),_:2},1032,["onClick"]),a(u,{size:"mini",type:"primary",onClick:y(w=>e.handleDesignTemplate(s.scope.$index,s.scope.row),["stop"])},{default:o(()=>[a(c,null,{default:o(()=>[a(C,{"icon-class":"design"})]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["data","table-head","params","onHandleSizeChange","onHandleCurrentChange","onHandleSelectionChange","onHandleRowDblClick","onHandleEdit","onHandleDelete"])]),_:1})])}var Ce=le(oe,[["render",me]]);export{Ce as default};

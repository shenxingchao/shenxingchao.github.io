var D=Object.defineProperty,z=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var k=(e,t,a)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,S=(e,t)=>{for(var a in t||(t={}))j.call(t,a)&&k(e,a,t[a]);if(w)for(var a of w(t))I.call(t,a)&&k(e,a,t[a]);return e},L=(e,t)=>z(e,R(t));var H=(e,t,a)=>new Promise((o,p)=>{var h=i=>{try{m(a.next(i))}catch(r){p(r)}},g=i=>{try{m(a.throw(i))}catch(r){p(r)}},m=i=>i.done?o(i.value):Promise.resolve(i.value).then(h,g);m((a=a.apply(e,t)).next())});import{d as E,D as V,q as B,g as F,m as K,t as q,r as d,j as G,C as s,x as l,o as M,v as N,aa as O,K as T,k as _}from"./vendor.3ccc2a44.js";import{C as U}from"./index.bdf34824.js";import{g as A,a as $}from"./goods.309d2ff9.js";import{_ as J}from"./hover.107ca141.js";import"./index.89492a4b.js";const P=E({name:"GoodsList",components:{CustomTable:U},setup(){const{proxy:e}=T(),t=V(),a=B(null);let o=F({List:[],selectionIdList:[],tableHead:[{label:"\u7F16\u53F7",prop:"id",width:60},{label:"\u540D\u79F0",prop:"goods_name",width:300},{label:"\u4EF7\u683C",prop:"goods_price",width:300},{label:"\u56FE\u7247",prop:"goods_image_url",render:n=>'<img  src="'+n.goods_image_url+'" class="table-img"/>'},{label:"\u72B6\u6001",prop:"status",component:n=>n.status?{is:"custom-tag",type:"success",title:"\u542F\u7528"}:{is:"custom-tag",type:"danger",title:"\u7981\u7528"}}],params:{page:1,total:0,pageSize:10,pageSizes:[10,20,30,50],keyword:"",status:""}});K(()=>H(this,null,function*(){yield p()}));const p=()=>A(o.params).then(n=>{o.List=n.data.data,o.params.total=n.data.total}).catch(()=>{}),h=n=>{o.params.pageSize=n,p()},g=n=>{o.params.page=n,p()},m=n=>{o.selectionIdList=n},i=n=>{t.push({path:"/goods/goods-edit",query:{id:n}})},r=(n,c)=>{i(c.id)},u=(n,c)=>{$({ids:[c.id]}).then(v=>{o.List.splice(n,1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{})},C=()=>{if(o.selectionIdList.length==0)return e.$message({message:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E",type:"error"}),!1;$({ids:o.selectionIdList}).then(n=>{o.List=o.List.filter(c=>o.selectionIdList.indexOf(c.id)==-1),e.$message({message:"\u5220\u9664\u6210\u529F",type:"success",duration:1500,onClose:function(){p()}})}).catch(()=>{})},y=()=>{a.value.resetFields()},b=()=>{o.params.page=1,o.params.pageSize=10,p()};return L(S({},q(o)),{searchForm:a,handleSizeChange:h,handleCurrentChange:g,handleSelectionChange:m,handleRowDblClick:i,handleEdit:r,handleDelete:u,handleDeleteRows:C,onReset:y,onSubmit:b})}}),Q={class:"app-container"},W=_("span",{style:{"vertical-align":"middle"}}," \u67E5\u8BE2 ",-1),X=_("span",{style:{"vertical-align":"middle"}}," \u91CD\u7F6E ",-1),Y=_("span",{style:{"vertical-align":"middle"}}," \u6DFB\u52A0 ",-1),Z=_("span",{style:{"vertical-align":"middle"}}," \u5220\u9664 ",-1);function x(e,t,a,o,p,h){const g=d("el-input"),m=d("el-form-item"),i=d("search"),r=d("el-icon"),u=d("el-button"),C=d("refresh-left"),y=d("plus"),b=d("delete"),n=d("el-form"),c=d("custom-table"),v=d("el-card");return M(),G("div",Q,[s(v,{shadow:"hover"},{default:l(()=>[s(c,{id:"goods-list",data:e.List,"table-head":e.tableHead,params:e.params,"show-selection":!0,"opt-width":180,onHandleSizeChange:e.handleSizeChange,onHandleCurrentChange:e.handleCurrentChange,onHandleSelectionChange:e.handleSelectionChange,onHandleRowDblClick:e.handleRowDblClick,onHandleEdit:e.handleEdit,onHandleDelete:e.handleDelete},{searchBar:l(()=>[s(n,{ref:"searchForm",inline:!0,model:e.params,class:"demo-form-inline",size:"mini",onSubmit:t[4]||(t[4]=N(()=>{},["prevent"]))},{default:l(()=>[s(m,{prop:"keyword"},{default:l(()=>[s(g,{modelValue:e.params.keyword,"onUpdate:modelValue":t[0]||(t[0]=f=>e.params.keyword=f),placeholder:"\u641C\u7D22\u5173\u952E\u8BCD",onKeyup:t[1]||(t[1]=O(f=>e.onSubmit(),["enter"]))},null,8,["modelValue"])]),_:1}),s(m,null,{default:l(()=>[s(u,{type:"primary",onClick:e.onSubmit},{default:l(()=>[s(r,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:l(()=>[s(i)]),_:1}),W]),_:1},8,["onClick"]),s(u,{onClick:t[2]||(t[2]=f=>{e.onReset(),e.onSubmit()})},{default:l(()=>[s(r,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:l(()=>[s(C)]),_:1}),X]),_:1}),s(u,{type:"primary",size:"mini",onClick:t[3]||(t[3]=f=>e.$router.push("/goods/goods-add"))},{default:l(()=>[s(r,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:l(()=>[s(y)]),_:1}),Y]),_:1}),s(u,{type:"danger",size:"mini",onClick:e.handleDeleteRows},{default:l(()=>[s(r,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:l(()=>[s(b)]),_:1}),Z]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["data","table-head","params","onHandleSizeChange","onHandleCurrentChange","onHandleSelectionChange","onHandleRowDblClick","onHandleEdit","onHandleDelete"])]),_:1})])}var le=J(P,[["render",x]]);export{le as default};

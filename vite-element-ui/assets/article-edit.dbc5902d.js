var e=Object.defineProperty,l=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(l,r,a)=>r in l?e(l,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[r]=a;import{d as i,m as s,q as d,a as m,b as n,e as c,t as p,r as f,o as g,h as b,l as F,v as h,A as _,J as v}from"./vendor.18722249.js";import{b as V,c as y}from"./article.fe2b87fa.js";import{_ as U,a as j}from"./index.eb1bc561.js";import"./index.ed94d848.js";const O=i({name:"ArticleEdit",components:{Upload:U,Editor:j},setup(){const{proxy:e}=_(),i=s(),f=d();let g=m({ruleForm:{id:f.query.id,title:"",image:"",image_list:[],author:"",type:"",detail:"",recommend:!0,top:!0,status:!0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],image:[{required:!0,message:"请上传图片"}],image_list:[{required:!0,message:"请上传图片列表"}],author:[{required:!0,message:"请输入作者",trigger:"blur"}],detail:[{required:!0,message:"请输入详情"}]}});const b=n(null);c((()=>{F()}));const F=()=>{V({id:g.ruleForm.id}).then((e=>{g.ruleForm=e.data})).catch((()=>{}))};return h=((e,l)=>{for(var r in l||(l={}))o.call(l,r)&&u(e,r,l[r]);if(a)for(var r of a(l))t.call(l,r)&&u(e,r,l[r]);return e})({},p(g)),l(h,r({ruleFormRef:b,submitForm:()=>{b.value.validate((l=>{if(!l)return console.log("error submit!!"),!1;y(g.ruleForm).then((l=>{e.$message({message:"保存成功",type:"success",onClose:function(){i.push("/article/article-list")}})})).catch((()=>{}))}))},resetForm:()=>{b.value.resetFields()},handleUploadSuccess:e=>{g.ruleForm.image=e,b.value.clearValidate("image")},handleUploadMultipleSuccess:e=>{g.ruleForm.image_list=e,b.value.clearValidate("image_list")},handleChangeEditor:e=>{g.ruleForm.detail=e}}));var h}}),w={class:"app-container"},q=v("保存"),x=v("重置");O.render=function(e,l,r,a,o,t){const u=f("el-input"),i=f("el-form-item"),s=f("upload"),d=f("editor"),m=f("el-switch"),n=f("el-button"),c=f("el-form"),p=f("el-col"),_=f("el-row"),v=f("el-card");return g(),b("div",w,[F(v,{shadow:"hover"},{default:h((()=>[F(_,{type:"flex",justify:"left"},{default:h((()=>[F(p,{xs:24,md:16},{default:h((()=>[F(c,{ref:"ruleFormRef",rules:e.rules,model:e.ruleForm,"label-position":"right","label-width":"150px"},{default:h((()=>[F(i,{label:"标题",prop:"title"},{default:h((()=>[F(u,{modelValue:e.ruleForm.title,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.title=l),placeholder:"标题"},null,8,["modelValue"])])),_:1}),F(i,{label:"图片",prop:"image"},{default:h((()=>[F(s,{file:e.ruleForm.image,onHandleUploadSuccess:l[1]||(l[1]=l=>e.handleUploadSuccess(l)),onHandleDeleteFile:l[2]||(l[2]=l=>e.ruleForm.image="")},null,8,["file"])])),_:1}),F(i,{label:"图片列表",prop:"image_list"},{default:h((()=>[F(s,{files:e.ruleForm.image_list,multiple:"",onHandleUploadMultipleSuccess:l[3]||(l[3]=l=>e.handleUploadMultipleSuccess(l)),onHandleClickDeleteMultiple:l[4]||(l[4]=l=>e.ruleForm.image_list=l)},null,8,["files"])])),_:1}),F(i,{label:"作者",prop:"author"},{default:h((()=>[F(u,{modelValue:e.ruleForm.author,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.author=l),placeholder:"作者"},null,8,["modelValue"])])),_:1}),F(i,{label:"详情",prop:"detail"},{default:h((()=>[F(d,{value:e.ruleForm.detail,onChange:l[6]||(l[6]=l=>e.handleChangeEditor(l))},null,8,["value"])])),_:1}),F(i,{label:"推荐",prop:"recommend"},{default:h((()=>[F(m,{modelValue:e.ruleForm.recommend,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.recommend=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1}),F(i,{label:"置顶",prop:"top"},{default:h((()=>[F(m,{modelValue:e.ruleForm.top,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.top=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1}),F(i,{label:"状态",prop:""},{default:h((()=>[F(m,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ruleForm.status=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1}),F(i,null,{default:h((()=>[F(n,{type:"success",onClick:l[10]||(l[10]=l=>e.submitForm())},{default:h((()=>[q])),_:1}),F(n,{onClick:l[11]||(l[11]=l=>e.resetForm())},{default:h((()=>[x])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})])),_:1})])),_:1})])};export{O as default};

var q=Object.defineProperty,w=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var b=(e,l,a)=>l in e?q(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,v=(e,l)=>{for(var a in l||(l={}))_.call(l,a)&&b(e,a,l[a]);if(F)for(var a of F(l))j.call(l,a)&&b(e,a,l[a]);return e},V=(e,l)=>w(e,S(l));import{d as k,m as D,q as M,a as R,b as H,e as A,t as B,r as u,g as N,l as t,v as r,A as I,o as J,J as U,y as h}from"./vendor.fc8b2226.js";import{b as T,c as z}from"./article.8215b578.js";import{U as G,E as K}from"./index.a01cb827.js";import{_ as L}from"./index.9fc33944.js";const O=k({name:"ArticleEdit",components:{Upload:G,Editor:K},setup(){const{proxy:e}=I(),l=D(),a=M();let d=R({ruleForm:{id:a.query.id,title:"",image:"",image_list:[],author:"",type:"",detail:"",recommend:!0,top:!0,status:!0},rules:{title:[{required:!0,message:e.$t("tips.input")+e.$t("field.title"),trigger:"blur"}],image:[{required:!0,message:e.$t("tips.upload")+e.$t("field.image")}],image_list:[{required:!0,message:e.$t("tips.upload")+e.$t("field.image_list")}],author:[{required:!0,message:e.$t("tips.input")+e.$t("field.author"),trigger:"blur"}],detail:[{required:!0,message:e.$t("tips.input")+e.$t("field.detail")}]}});const n=H(null);A(()=>{g()});const g=()=>{T({id:d.ruleForm.id}).then(i=>{d.ruleForm=i.data}).catch(()=>{})},p=()=>{n.value.validate(i=>{if(i)z(d.ruleForm).then($=>{e.$message({message:e.$t("tips.edit_success"),type:"success",onClose:function(){l.push("/article/article-list")}})}).catch(()=>{});else return console.log("error submit!!"),!1})},s=()=>{n.value.resetFields()},f=i=>{d.ruleForm.image=i,n.value.clearValidate("image")},c=i=>{d.ruleForm.image_list=i,n.value.clearValidate("image_list")},m=i=>{d.ruleForm.detail=i};return V(v({},B(d)),{ruleFormRef:n,submitForm:p,resetForm:s,handleUploadSuccess:f,handleUploadMultipleSuccess:c,handleChangeEditor:m})}}),P={class:"app-container"};function Q(e,l,a,d,n,g){const p=u("el-input"),s=u("el-form-item"),f=u("upload"),c=u("editor"),m=u("el-switch"),i=u("el-button"),$=u("el-form"),C=u("el-col"),y=u("el-row"),E=u("el-card");return J(),N("div",P,[t(E,{shadow:"hover"},{default:r(()=>[t(y,{type:"flex",justify:"left"},{default:r(()=>[t(C,{xs:24,md:16},{default:r(()=>[t($,{ref:"ruleFormRef",rules:e.rules,model:e.ruleForm,"label-position":"right","label-width":"150px"},{default:r(()=>[t(s,{label:e.$t("field.title"),prop:"title"},{default:r(()=>[t(p,{modelValue:e.ruleForm.title,"onUpdate:modelValue":l[0]||(l[0]=o=>e.ruleForm.title=o),placeholder:e.$t("field.title")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:e.$t("field.image"),prop:"image"},{default:r(()=>[t(f,{file:e.ruleForm.image,onHandleUploadSuccess:l[1]||(l[1]=o=>e.handleUploadSuccess(o)),onHandleDeleteFile:l[2]||(l[2]=o=>e.ruleForm.image="")},null,8,["file"])]),_:1},8,["label"]),t(s,{label:e.$t("field.image_list"),prop:"image_list"},{default:r(()=>[t(f,{files:e.ruleForm.image_list,multiple:"",onHandleUploadMultipleSuccess:l[3]||(l[3]=o=>e.handleUploadMultipleSuccess(o)),onHandleClickDeleteMultiple:l[4]||(l[4]=o=>e.ruleForm.image_list=o)},null,8,["files"])]),_:1},8,["label"]),t(s,{label:e.$t("field.author"),prop:"author"},{default:r(()=>[t(p,{modelValue:e.ruleForm.author,"onUpdate:modelValue":l[5]||(l[5]=o=>e.ruleForm.author=o),placeholder:e.$t("field.author")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:e.$t("field.detail"),prop:"detail"},{default:r(()=>[t(c,{value:e.ruleForm.detail,onChange:l[6]||(l[6]=o=>e.handleChangeEditor(o))},null,8,["value"])]),_:1},8,["label"]),t(s,{label:e.$t("field.recommend"),prop:"recommend"},{default:r(()=>[t(m,{modelValue:e.ruleForm.recommend,"onUpdate:modelValue":l[7]||(l[7]=o=>e.ruleForm.recommend=o),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{label:e.$t("field.top"),prop:"top"},{default:r(()=>[t(m,{modelValue:e.ruleForm.top,"onUpdate:modelValue":l[8]||(l[8]=o=>e.ruleForm.top=o),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{label:e.$t("field.status"),prop:""},{default:r(()=>[t(m,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[9]||(l[9]=o=>e.ruleForm.status=o),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),_:1},8,["label"]),t(s,null,{default:r(()=>[t(i,{type:"success",onClick:l[10]||(l[10]=o=>e.submitForm())},{default:r(()=>[U(h(e.$t("opt.save")),1)]),_:1}),t(i,{onClick:l[11]||(l[11]=o=>e.resetForm())},{default:r(()=>[U(h(e.$t("opt.reset")),1)]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})]),_:1})]),_:1})])}var ee=L(O,[["render",Q]]);export{ee as default};

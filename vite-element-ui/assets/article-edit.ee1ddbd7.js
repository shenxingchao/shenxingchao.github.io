var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;import{d as u,m as s,q as d,a as m,b as p,e as n,t as c,r as f,g as b,l as g,v as h,A as F,o as _,J as v,y as $}from"./vendor.77177042.js";import{b as V,c as y}from"./article.43619c0e.js";import{U,E as j}from"./index.c1425acb.js";import{_ as O}from"./index.0c9754f5.js";const w=u({name:"ArticleEdit",components:{Upload:U,Editor:j},setup(){const{proxy:e}=F(),u=s(),f=d();let b=m({ruleForm:{id:f.query.id,title:"",image:"",image_list:[],author:"",type:"",detail:"",recommend:!0,top:!0,status:!0},rules:{title:[{required:!0,message:e.$t("tips.input")+e.$t("field.title"),trigger:"blur"}],image:[{required:!0,message:e.$t("tips.upload")+e.$t("field.image")}],image_list:[{required:!0,message:e.$t("tips.upload")+e.$t("field.image_list")}],author:[{required:!0,message:e.$t("tips.input")+e.$t("field.author"),trigger:"blur"}],detail:[{required:!0,message:e.$t("tips.input")+e.$t("field.detail")}]}});const g=p(null);n((()=>{h()}));const h=()=>{V({id:b.ruleForm.id}).then((e=>{b.ruleForm=e.data})).catch((()=>{}))};return _=((e,l)=>{for(var t in l||(l={}))r.call(l,t)&&i(e,t,l[t]);if(a)for(var t of a(l))o.call(l,t)&&i(e,t,l[t]);return e})({},c(b)),l(_,t({ruleFormRef:g,submitForm:()=>{g.value.validate((l=>{if(!l)return console.log("error submit!!"),!1;y(b.ruleForm).then((l=>{e.$message({message:e.$t("tips.edit_success"),type:"success",onClose:function(){u.push("/article/article-list")}})})).catch((()=>{}))}))},resetForm:()=>{g.value.resetFields()},handleUploadSuccess:e=>{b.ruleForm.image=e,g.value.clearValidate("image")},handleUploadMultipleSuccess:e=>{b.ruleForm.image_list=e,g.value.clearValidate("image_list")},handleChangeEditor:e=>{b.ruleForm.detail=e}}));var _}}),q={class:"app-container"};var x=O(w,[["render",function(e,l,t,a,r,o){const i=f("el-input"),u=f("el-form-item"),s=f("upload"),d=f("editor"),m=f("el-switch"),p=f("el-button"),n=f("el-form"),c=f("el-col"),F=f("el-row"),V=f("el-card");return _(),b("div",q,[g(V,{shadow:"hover"},{default:h((()=>[g(F,{type:"flex",justify:"left"},{default:h((()=>[g(c,{xs:24,md:16},{default:h((()=>[g(n,{ref:"ruleFormRef",rules:e.rules,model:e.ruleForm,"label-position":"right","label-width":"150px"},{default:h((()=>[g(u,{label:e.$t("field.title"),prop:"title"},{default:h((()=>[g(i,{modelValue:e.ruleForm.title,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.title=l),placeholder:e.$t("field.title")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(u,{label:e.$t("field.image"),prop:"image"},{default:h((()=>[g(s,{file:e.ruleForm.image,onHandleUploadSuccess:l[1]||(l[1]=l=>e.handleUploadSuccess(l)),onHandleDeleteFile:l[2]||(l[2]=l=>e.ruleForm.image="")},null,8,["file"])])),_:1},8,["label"]),g(u,{label:e.$t("field.image_list"),prop:"image_list"},{default:h((()=>[g(s,{files:e.ruleForm.image_list,multiple:"",onHandleUploadMultipleSuccess:l[3]||(l[3]=l=>e.handleUploadMultipleSuccess(l)),onHandleClickDeleteMultiple:l[4]||(l[4]=l=>e.ruleForm.image_list=l)},null,8,["files"])])),_:1},8,["label"]),g(u,{label:e.$t("field.author"),prop:"author"},{default:h((()=>[g(i,{modelValue:e.ruleForm.author,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.author=l),placeholder:e.$t("field.author")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(u,{label:e.$t("field.detail"),prop:"detail"},{default:h((()=>[g(d,{value:e.ruleForm.detail,onChange:l[6]||(l[6]=l=>e.handleChangeEditor(l))},null,8,["value"])])),_:1},8,["label"]),g(u,{label:e.$t("field.recommend"),prop:"recommend"},{default:h((()=>[g(m,{modelValue:e.ruleForm.recommend,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.recommend=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1},8,["label"]),g(u,{label:e.$t("field.top"),prop:"top"},{default:h((()=>[g(m,{modelValue:e.ruleForm.top,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.top=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1},8,["label"]),g(u,{label:e.$t("field.status"),prop:""},{default:h((()=>[g(m,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ruleForm.status=l),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])])),_:1},8,["label"]),g(u,null,{default:h((()=>[g(p,{type:"success",onClick:l[10]||(l[10]=l=>e.submitForm())},{default:h((()=>[v($(e.$t("opt.save")),1)])),_:1}),g(p,{onClick:l[11]||(l[11]=l=>e.resetForm())},{default:h((()=>[v($(e.$t("opt.reset")),1)])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})])),_:1})])),_:1})])}]]);export{x as default};
